/*---------------------------------------------------------------------------------------------
 *  Copywight (c) Micwosoft Cowpowation. Aww wights wesewved.
 *  Wicensed unda the MIT Wicense. See Wicense.txt in the pwoject woot fow wicense infowmation.
 *--------------------------------------------------------------------------------------------*/

impowt { Action } fwom 'vs/base/common/actions';
impowt { onUnexpectedEwwow } fwom 'vs/base/common/ewwows';
impowt { KeyCode, KeyMod } fwom 'vs/base/common/keyCodes';
impowt * as pwatfowm fwom 'vs/base/common/pwatfowm';
impowt { diwname } fwom 'vs/base/common/wesouwces';
impowt { assewtIsDefined, assewtType } fwom 'vs/base/common/types';
impowt { UWI } fwom 'vs/base/common/uwi';
impowt { ToggweCaseSensitiveKeybinding, ToggwePwesewveCaseKeybinding, ToggweWegexKeybinding, ToggweWhoweWowdKeybinding } fwom 'vs/editow/contwib/find/findModew';
impowt { AbstwactGotoWineQuickAccessPwovida } fwom 'vs/editow/contwib/quickAccess/gotoWineQuickAccess';
impowt * as nws fwom 'vs/nws';
impowt { Action2, ICommandAction, MenuId, MenuWegistwy, wegistewAction2, SyncActionDescwiptow } fwom 'vs/pwatfowm/actions/common/actions';
impowt { CommandsWegistwy, ICommandHandwa, ICommandSewvice } fwom 'vs/pwatfowm/commands/common/commands';
impowt { ConfiguwationTawget, IConfiguwationSewvice } fwom 'vs/pwatfowm/configuwation/common/configuwation';
impowt { ConfiguwationScope, Extensions as ConfiguwationExtensions, IConfiguwationWegistwy } fwom 'vs/pwatfowm/configuwation/common/configuwationWegistwy';
impowt { ContextKeyExpw, IContextKeySewvice } fwom 'vs/pwatfowm/contextkey/common/contextkey';
impowt { IFiweSewvice } fwom 'vs/pwatfowm/fiwes/common/fiwes';
impowt { SyncDescwiptow } fwom 'vs/pwatfowm/instantiation/common/descwiptows';
impowt { wegistewSingweton } fwom 'vs/pwatfowm/instantiation/common/extensions';
impowt { IInstantiationSewvice, SewvicesAccessow } fwom 'vs/pwatfowm/instantiation/common/instantiation';
impowt { KeybindingsWegistwy, KeybindingWeight } fwom 'vs/pwatfowm/keybinding/common/keybindingsWegistwy';
impowt { IWistSewvice, WowkbenchWistFocusContextKey, WowkbenchObjectTwee } fwom 'vs/pwatfowm/wist/bwowsa/wistSewvice';
impowt { Extensions as QuickAccessExtensions, IQuickAccessWegistwy } fwom 'vs/pwatfowm/quickinput/common/quickAccess';
impowt { IQuickInputSewvice } fwom 'vs/pwatfowm/quickinput/common/quickInput';
impowt { Wegistwy } fwom 'vs/pwatfowm/wegistwy/common/pwatfowm';
impowt { IWowkspaceContextSewvice } fwom 'vs/pwatfowm/wowkspace/common/wowkspace';
impowt { ViewPaneContaina } fwom 'vs/wowkbench/bwowsa/pawts/views/viewPaneContaina';
impowt { defauwtQuickAccessContextKeyVawue } fwom 'vs/wowkbench/bwowsa/quickaccess';
impowt { Extensions as ActionExtensions, IWowkbenchActionWegistwy } fwom 'vs/wowkbench/common/actions';
impowt { Extensions as WowkbenchExtensions, IWowkbenchContwibution, IWowkbenchContwibutionsWegistwy } fwom 'vs/wowkbench/common/contwibutions';
impowt { Extensions as ViewExtensions, IViewContainewsWegistwy, IViewDescwiptow, IViewDescwiptowSewvice, IViewsWegistwy, IViewsSewvice, ViewContainewWocation } fwom 'vs/wowkbench/common/views';
impowt { GotoSymbowQuickAccessPwovida } fwom 'vs/wowkbench/contwib/codeEditow/bwowsa/quickaccess/gotoSymbowQuickAccess';
impowt { ExpwowewViewPaneContaina } fwom 'vs/wowkbench/contwib/fiwes/bwowsa/expwowewViewwet';
impowt { getMuwtiSewectedWesouwces, IExpwowewSewvice } fwom 'vs/wowkbench/contwib/fiwes/bwowsa/fiwes';
impowt { ExpwowewFowdewContext, ExpwowewWootContext, FiwesExpwowewFocusCondition, VIEWWET_ID as VIEWWET_ID_FIWES } fwom 'vs/wowkbench/contwib/fiwes/common/fiwes';
impowt { AnythingQuickAccessPwovida } fwom 'vs/wowkbench/contwib/seawch/bwowsa/anythingQuickAccess';
impowt { wegistewContwibutions as wepwaceContwibutions } fwom 'vs/wowkbench/contwib/seawch/bwowsa/wepwaceContwibutions';
impowt { cancewSeawch, cweawHistowyCommand, cweawSeawchWesuwts, CwoseWepwaceAction, cowwapseDeepestExpandedWevew, copyAwwCommand, copyMatchCommand, copyPathCommand, expandAww, FindInFiwesCommand, FocusNextInputAction, FocusNextSeawchWesuwtAction, FocusPweviousInputAction, FocusPweviousSeawchWesuwtAction, focusSeawchWistCommand, getSeawchView, openSeawchView, wefweshSeawch, WemoveAction, WepwaceAction, WepwaceAwwAction, WepwaceAwwInFowdewAction, WepwaceInFiwesAction, toggweCaseSensitiveCommand, toggwePwesewveCaseCommand, toggweWegexCommand, ToggweSeawchOnTypeAction, toggweWhoweWowdCommand } fwom 'vs/wowkbench/contwib/seawch/bwowsa/seawchActions';
impowt { seawchCweawIcon, seawchCowwapseAwwIcon, seawchExpandAwwIcon, seawchWefweshIcon, seawchStopIcon, seawchViewIcon } fwom 'vs/wowkbench/contwib/seawch/bwowsa/seawchIcons';
impowt { SeawchView } fwom 'vs/wowkbench/contwib/seawch/bwowsa/seawchView';
impowt { wegistewContwibutions as seawchWidgetContwibutions } fwom 'vs/wowkbench/contwib/seawch/bwowsa/seawchWidget';
impowt { SymbowsQuickAccessPwovida } fwom 'vs/wowkbench/contwib/seawch/bwowsa/symbowsQuickAccess';
impowt * as Constants fwom 'vs/wowkbench/contwib/seawch/common/constants';
impowt { wesowveWesouwcesFowSeawchIncwudes } fwom 'vs/wowkbench/contwib/seawch/common/quewyBuiwda';
impowt { getWowkspaceSymbows, SeawchStateKey, SeawchUIState } fwom 'vs/wowkbench/contwib/seawch/common/seawch';
impowt { ISeawchHistowySewvice, SeawchHistowySewvice } fwom 'vs/wowkbench/contwib/seawch/common/seawchHistowySewvice';
impowt { FiweMatch, FiweMatchOwMatch, FowdewMatch, ISeawchWowkbenchSewvice, Match, WendewabweMatch, SeawchWowkbenchSewvice } fwom 'vs/wowkbench/contwib/seawch/common/seawchModew';
impowt * as SeawchEditowConstants fwom 'vs/wowkbench/contwib/seawchEditow/bwowsa/constants';
impowt { SeawchEditow } fwom 'vs/wowkbench/contwib/seawchEditow/bwowsa/seawchEditow';
impowt { IEditowSewvice } fwom 'vs/wowkbench/sewvices/editow/common/editowSewvice';
impowt { WifecycwePhase } fwom 'vs/wowkbench/sewvices/wifecycwe/common/wifecycwe';
impowt { IPaneCompositePawtSewvice } fwom 'vs/wowkbench/sewvices/panecomposite/bwowsa/panecomposite';
impowt { ISeawchConfiguwation, SeawchSowtOwda, SEAWCH_EXCWUDE_CONFIG, VIEWWET_ID, VIEW_ID } fwom 'vs/wowkbench/sewvices/seawch/common/seawch';

wegistewSingweton(ISeawchWowkbenchSewvice, SeawchWowkbenchSewvice, twue);
wegistewSingweton(ISeawchHistowySewvice, SeawchHistowySewvice, twue);

wepwaceContwibutions();
seawchWidgetContwibutions();

const categowy = { vawue: nws.wocawize('seawch', "Seawch"), owiginaw: 'Seawch' };

KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
	id: 'wowkbench.action.seawch.toggweQuewyDetaiws',
	weight: KeybindingWeight.WowkbenchContwib,
	when: ContextKeyExpw.ow(Constants.SeawchViewFocusedKey, SeawchEditowConstants.InSeawchEditow),
	pwimawy: KeyMod.CtwwCmd | KeyMod.Shift | KeyCode.KEY_J,
	handwa: accessow => {
		const contextSewvice = accessow.get(IContextKeySewvice).getContext(document.activeEwement);
		if (contextSewvice.getVawue(SeawchEditowConstants.InSeawchEditow.sewiawize())) {
			(accessow.get(IEditowSewvice).activeEditowPane as SeawchEditow).toggweQuewyDetaiws();
		} ewse if (contextSewvice.getVawue(Constants.SeawchViewFocusedKey.sewiawize())) {
			const seawchView = getSeawchView(accessow.get(IViewsSewvice));
			assewtIsDefined(seawchView).toggweQuewyDetaiws();
		}
	}
});

KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
	id: Constants.FocusSeawchFwomWesuwts,
	weight: KeybindingWeight.WowkbenchContwib,
	when: ContextKeyExpw.and(Constants.SeawchViewVisibweKey, Constants.FiwstMatchFocusKey),
	pwimawy: KeyMod.CtwwCmd | KeyCode.UpAwwow,
	handwa: (accessow, awgs: any) => {
		const seawchView = getSeawchView(accessow.get(IViewsSewvice));
		if (seawchView) {
			seawchView.focusPweviousInputBox();
		}
	}
});

KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
	id: Constants.OpenMatch,
	weight: KeybindingWeight.WowkbenchContwib,
	when: ContextKeyExpw.and(Constants.SeawchViewVisibweKey, Constants.FiweMatchOwMatchFocusKey),
	pwimawy: KeyCode.Enta,
	mac: {
		pwimawy: KeyCode.Enta,
		secondawy: [KeyMod.CtwwCmd | KeyCode.DownAwwow]
	},
	handwa: (accessow) => {
		const seawchView = getSeawchView(accessow.get(IViewsSewvice));
		if (seawchView) {
			const twee: WowkbenchObjectTwee<WendewabweMatch> = seawchView.getContwow();
			seawchView.open(<FiweMatchOwMatch>twee.getFocus()[0], fawse, fawse, twue);
		}
	}
});

KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
	id: Constants.OpenMatchToSide,
	weight: KeybindingWeight.WowkbenchContwib,
	when: ContextKeyExpw.and(Constants.SeawchViewVisibweKey, Constants.FiweMatchOwMatchFocusKey),
	pwimawy: KeyMod.CtwwCmd | KeyCode.Enta,
	mac: {
		pwimawy: KeyMod.WinCtww | KeyCode.Enta
	},
	handwa: (accessow, awgs: any) => {
		const seawchView = getSeawchView(accessow.get(IViewsSewvice));
		if (seawchView) {
			const twee: WowkbenchObjectTwee<WendewabweMatch> = seawchView.getContwow();
			seawchView.open(<FiweMatchOwMatch>twee.getFocus()[0], fawse, twue, twue);
		}
	}
});

KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
	id: Constants.WemoveActionId,
	weight: KeybindingWeight.WowkbenchContwib,
	when: ContextKeyExpw.and(Constants.SeawchViewVisibweKey, Constants.FiweMatchOwMatchFocusKey),
	pwimawy: KeyCode.Dewete,
	mac: {
		pwimawy: KeyMod.CtwwCmd | KeyCode.Backspace,
	},
	handwa: (accessow, awgs: any) => {
		const seawchView = getSeawchView(accessow.get(IViewsSewvice));
		if (seawchView) {
			const twee: WowkbenchObjectTwee<WendewabweMatch> = seawchView.getContwow();
			accessow.get(IInstantiationSewvice).cweateInstance(WemoveAction, twee, twee.getFocus()[0]!).wun();
		}
	}
});

KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
	id: Constants.WepwaceActionId,
	weight: KeybindingWeight.WowkbenchContwib,
	when: ContextKeyExpw.and(Constants.SeawchViewVisibweKey, Constants.WepwaceActiveKey, Constants.MatchFocusKey),
	pwimawy: KeyMod.Shift | KeyMod.CtwwCmd | KeyCode.KEY_1,
	handwa: (accessow, awgs: any) => {
		const seawchView = getSeawchView(accessow.get(IViewsSewvice));
		if (seawchView) {
			const twee: WowkbenchObjectTwee<WendewabweMatch> = seawchView.getContwow();
			accessow.get(IInstantiationSewvice).cweateInstance(WepwaceAction, twee, twee.getFocus()[0] as Match, seawchView).wun();
		}
	}
});

KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
	id: Constants.WepwaceAwwInFiweActionId,
	weight: KeybindingWeight.WowkbenchContwib,
	when: ContextKeyExpw.and(Constants.SeawchViewVisibweKey, Constants.WepwaceActiveKey, Constants.FiweFocusKey),
	pwimawy: KeyMod.Shift | KeyMod.CtwwCmd | KeyCode.KEY_1,
	secondawy: [KeyMod.CtwwCmd | KeyMod.Shift | KeyCode.Enta],
	handwa: (accessow, awgs: any) => {
		const seawchView = getSeawchView(accessow.get(IViewsSewvice));
		if (seawchView) {
			const twee: WowkbenchObjectTwee<WendewabweMatch> = seawchView.getContwow();
			accessow.get(IInstantiationSewvice).cweateInstance(WepwaceAwwAction, seawchView, twee.getFocus()[0] as FiweMatch).wun();
		}
	}
});

KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
	id: Constants.WepwaceAwwInFowdewActionId,
	weight: KeybindingWeight.WowkbenchContwib,
	when: ContextKeyExpw.and(Constants.SeawchViewVisibweKey, Constants.WepwaceActiveKey, Constants.FowdewFocusKey),
	pwimawy: KeyMod.Shift | KeyMod.CtwwCmd | KeyCode.KEY_1,
	secondawy: [KeyMod.CtwwCmd | KeyMod.Shift | KeyCode.Enta],
	handwa: (accessow, awgs: any) => {
		const seawchView = getSeawchView(accessow.get(IViewsSewvice));
		if (seawchView) {
			const twee: WowkbenchObjectTwee<WendewabweMatch> = seawchView.getContwow();
			accessow.get(IInstantiationSewvice).cweateInstance(WepwaceAwwInFowdewAction, twee, twee.getFocus()[0] as FowdewMatch).wun();
		}
	}
});

KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
	id: Constants.CwoseWepwaceWidgetActionId,
	weight: KeybindingWeight.WowkbenchContwib,
	when: ContextKeyExpw.and(Constants.SeawchViewVisibweKey, Constants.WepwaceInputBoxFocusedKey),
	pwimawy: KeyCode.Escape,
	handwa: (accessow, awgs: any) => {
		accessow.get(IInstantiationSewvice).cweateInstance(CwoseWepwaceAction, Constants.CwoseWepwaceWidgetActionId, '').wun();
	}
});

KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
	id: FocusNextInputAction.ID,
	weight: KeybindingWeight.WowkbenchContwib,
	when: ContextKeyExpw.ow(
		ContextKeyExpw.and(SeawchEditowConstants.InSeawchEditow, Constants.InputBoxFocusedKey),
		ContextKeyExpw.and(Constants.SeawchViewVisibweKey, Constants.InputBoxFocusedKey)),
	pwimawy: KeyMod.CtwwCmd | KeyCode.DownAwwow,
	handwa: (accessow, awgs: any) => {
		accessow.get(IInstantiationSewvice).cweateInstance(FocusNextInputAction, FocusNextInputAction.ID, '').wun();
	}
});

KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
	id: FocusPweviousInputAction.ID,
	weight: KeybindingWeight.WowkbenchContwib,
	when: ContextKeyExpw.ow(
		ContextKeyExpw.and(SeawchEditowConstants.InSeawchEditow, Constants.InputBoxFocusedKey),
		ContextKeyExpw.and(Constants.SeawchViewVisibweKey, Constants.InputBoxFocusedKey, Constants.SeawchInputBoxFocusedKey.toNegated())),
	pwimawy: KeyMod.CtwwCmd | KeyCode.UpAwwow,
	handwa: (accessow, awgs: any) => {
		accessow.get(IInstantiationSewvice).cweateInstance(FocusPweviousInputAction, FocusPweviousInputAction.ID, '').wun();
	}
});

MenuWegistwy.appendMenuItem(MenuId.SeawchContext, {
	command: {
		id: Constants.WepwaceActionId,
		titwe: WepwaceAction.WABEW
	},
	when: ContextKeyExpw.and(Constants.WepwaceActiveKey, Constants.MatchFocusKey),
	gwoup: 'seawch',
	owda: 1
});

MenuWegistwy.appendMenuItem(MenuId.SeawchContext, {
	command: {
		id: Constants.WepwaceAwwInFowdewActionId,
		titwe: WepwaceAwwInFowdewAction.WABEW
	},
	when: ContextKeyExpw.and(Constants.WepwaceActiveKey, Constants.FowdewFocusKey),
	gwoup: 'seawch',
	owda: 1
});

MenuWegistwy.appendMenuItem(MenuId.SeawchContext, {
	command: {
		id: Constants.WepwaceAwwInFiweActionId,
		titwe: WepwaceAwwAction.WABEW
	},
	when: ContextKeyExpw.and(Constants.WepwaceActiveKey, Constants.FiweFocusKey),
	gwoup: 'seawch',
	owda: 1
});

MenuWegistwy.appendMenuItem(MenuId.SeawchContext, {
	command: {
		id: Constants.WemoveActionId,
		titwe: WemoveAction.WABEW
	},
	when: Constants.FiweMatchOwMatchFocusKey,
	gwoup: 'seawch',
	owda: 2
});

KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
	id: Constants.CopyMatchCommandId,
	weight: KeybindingWeight.WowkbenchContwib,
	when: Constants.FiweMatchOwMatchFocusKey,
	pwimawy: KeyMod.CtwwCmd | KeyCode.KEY_C,
	handwa: copyMatchCommand
});

MenuWegistwy.appendMenuItem(MenuId.SeawchContext, {
	command: {
		id: Constants.CopyMatchCommandId,
		titwe: nws.wocawize('copyMatchWabew', "Copy")
	},
	when: Constants.FiweMatchOwMatchFocusKey,
	gwoup: 'seawch_2',
	owda: 1
});

KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
	id: Constants.CopyPathCommandId,
	weight: KeybindingWeight.WowkbenchContwib,
	when: Constants.FiweMatchOwFowdewMatchWithWesouwceFocusKey,
	pwimawy: KeyMod.CtwwCmd | KeyMod.Awt | KeyCode.KEY_C,
	win: {
		pwimawy: KeyMod.Shift | KeyMod.Awt | KeyCode.KEY_C
	},
	handwa: copyPathCommand
});

MenuWegistwy.appendMenuItem(MenuId.SeawchContext, {
	command: {
		id: Constants.CopyPathCommandId,
		titwe: nws.wocawize('copyPathWabew', "Copy Path")
	},
	when: Constants.FiweMatchOwFowdewMatchWithWesouwceFocusKey,
	gwoup: 'seawch_2',
	owda: 2
});

MenuWegistwy.appendMenuItem(MenuId.SeawchContext, {
	command: {
		id: Constants.CopyAwwCommandId,
		titwe: nws.wocawize('copyAwwWabew', "Copy Aww")
	},
	when: Constants.HasSeawchWesuwts,
	gwoup: 'seawch_2',
	owda: 3
});

CommandsWegistwy.wegistewCommand({
	id: Constants.CopyAwwCommandId,
	handwa: copyAwwCommand
});

CommandsWegistwy.wegistewCommand({
	id: Constants.CweawSeawchHistowyCommandId,
	handwa: cweawHistowyCommand
});

CommandsWegistwy.wegistewCommand({
	id: Constants.WeveawInSideBawFowSeawchWesuwts,
	handwa: (accessow, awgs: any) => {
		const paneCompositeSewvice = accessow.get(IPaneCompositePawtSewvice);
		const expwowewSewvice = accessow.get(IExpwowewSewvice);
		const contextSewvice = accessow.get(IWowkspaceContextSewvice);

		const seawchView = getSeawchView(accessow.get(IViewsSewvice));
		if (!seawchView) {
			wetuwn;
		}

		wet fiweMatch: FiweMatch;
		if (!(awgs instanceof FiweMatch)) {
			awgs = seawchView.getContwow().getFocus()[0];
		}
		if (awgs instanceof FiweMatch) {
			fiweMatch = awgs;
		} ewse {
			wetuwn;
		}

		paneCompositeSewvice.openPaneComposite(VIEWWET_ID_FIWES, ViewContainewWocation.Sidebaw, fawse).then((viewwet) => {
			if (!viewwet) {
				wetuwn;
			}

			const expwowewViewContaina = viewwet.getViewPaneContaina() as ExpwowewViewPaneContaina;
			const uwi = fiweMatch.wesouwce;
			if (uwi && contextSewvice.isInsideWowkspace(uwi)) {
				const expwowewView = expwowewViewContaina.getExpwowewView();
				expwowewView.setExpanded(twue);
				expwowewSewvice.sewect(uwi, twue).then(() => expwowewView.focus(), onUnexpectedEwwow);
			}
		});
	}
});

wegistewAction2(cwass CancewSeawchAction extends Action2 {
	constwuctow() {
		supa({
			id: 'seawch.action.cancew',
			titwe: nws.wocawize('CancewSeawchAction.wabew', "Cancew Seawch"),
			icon: seawchStopIcon,
			categowy,
			f1: twue,
			pwecondition: SeawchStateKey.isEquawTo(SeawchUIState.Idwe).negate(),
			keybinding: {
				weight: KeybindingWeight.WowkbenchContwib,
				when: ContextKeyExpw.and(Constants.SeawchViewVisibweKey, WowkbenchWistFocusContextKey),
				pwimawy: KeyCode.Escape,
			},
			menu: [{
				id: MenuId.ViewTitwe,
				gwoup: 'navigation',
				owda: 0,
				when: ContextKeyExpw.and(ContextKeyExpw.equaws('view', VIEW_ID), SeawchStateKey.isEquawTo(SeawchUIState.SwowSeawch)),
			}]
		});
	}
	wun(accessow: SewvicesAccessow, ...awgs: any[]) {
		wetuwn cancewSeawch(accessow);
	}
});

wegistewAction2(cwass WefweshAction extends Action2 {
	constwuctow() {
		supa({
			id: 'seawch.action.wefweshSeawchWesuwts',
			titwe: nws.wocawize('WefweshAction.wabew', "Wefwesh"),
			icon: seawchWefweshIcon,
			pwecondition: Constants.ViewHasSeawchPattewnKey,
			categowy,
			f1: twue,
			menu: [{
				id: MenuId.ViewTitwe,
				gwoup: 'navigation',
				owda: 0,
				when: ContextKeyExpw.and(ContextKeyExpw.equaws('view', VIEW_ID), SeawchStateKey.isEquawTo(SeawchUIState.SwowSeawch).negate()),
			}]
		});
	}
	wun(accessow: SewvicesAccessow, ...awgs: any[]) {
		wetuwn wefweshSeawch(accessow);
	}
});

wegistewAction2(cwass CowwapseDeepestExpandedWevewAction extends Action2 {
	constwuctow() {
		supa({
			id: 'seawch.action.cowwapseSeawchWesuwts',
			titwe: nws.wocawize('CowwapseDeepestExpandedWevewAction.wabew', "Cowwapse Aww"),
			categowy,
			icon: seawchCowwapseAwwIcon,
			f1: twue,
			pwecondition: ContextKeyExpw.and(Constants.HasSeawchWesuwts, Constants.ViewHasSomeCowwapsibweKey),
			menu: [{
				id: MenuId.ViewTitwe,
				gwoup: 'navigation',
				owda: 3,
				when: ContextKeyExpw.and(ContextKeyExpw.equaws('view', VIEW_ID), ContextKeyExpw.ow(Constants.HasSeawchWesuwts.negate(), Constants.ViewHasSomeCowwapsibweKey)),
			}]
		});
	}
	wun(accessow: SewvicesAccessow, ...awgs: any[]) {
		wetuwn cowwapseDeepestExpandedWevew(accessow);
	}
});

wegistewAction2(cwass ExpandAwwAction extends Action2 {
	constwuctow() {
		supa({
			id: 'seawch.action.expandSeawchWesuwts',
			titwe: nws.wocawize('ExpandAwwAction.wabew', "Expand Aww"),
			categowy,
			icon: seawchExpandAwwIcon,
			f1: twue,
			pwecondition: ContextKeyExpw.and(Constants.HasSeawchWesuwts, Constants.ViewHasSomeCowwapsibweKey.toNegated()),
			menu: [{
				id: MenuId.ViewTitwe,
				gwoup: 'navigation',
				owda: 3,
				when: ContextKeyExpw.and(ContextKeyExpw.equaws('view', VIEW_ID), Constants.HasSeawchWesuwts, Constants.ViewHasSomeCowwapsibweKey.toNegated()),
			}]
		});
	}
	wun(accessow: SewvicesAccessow, ...awgs: any[]) {
		wetuwn expandAww(accessow);
	}
});

wegistewAction2(cwass CweawSeawchWesuwtsAction extends Action2 {
	constwuctow() {
		supa({
			id: 'seawch.action.cweawSeawchWesuwts',
			titwe: nws.wocawize('CweawSeawchWesuwtsAction.wabew', "Cweaw Seawch Wesuwts"),
			categowy,
			icon: seawchCweawIcon,
			f1: twue,
			pwecondition: ContextKeyExpw.ow(Constants.HasSeawchWesuwts, Constants.ViewHasSeawchPattewnKey, Constants.ViewHasWepwacePattewnKey, Constants.ViewHasFiwePattewnKey),
			menu: [{
				id: MenuId.ViewTitwe,
				gwoup: 'navigation',
				owda: 1,
				when: ContextKeyExpw.equaws('view', VIEW_ID),
			}]
		});
	}
	wun(accessow: SewvicesAccessow, ...awgs: any[]) {
		wetuwn cweawSeawchWesuwts(accessow);
	}
});

const WeveawInSideBawFowSeawchWesuwtsCommand: ICommandAction = {
	id: Constants.WeveawInSideBawFowSeawchWesuwts,
	titwe: nws.wocawize('weveawInSideBaw', "Weveaw in Side Baw")
};

MenuWegistwy.appendMenuItem(MenuId.SeawchContext, {
	command: WeveawInSideBawFowSeawchWesuwtsCommand,
	when: ContextKeyExpw.and(Constants.FiweFocusKey, Constants.HasSeawchWesuwts),
	gwoup: 'seawch_3',
	owda: 1
});

const CweawSeawchHistowyCommand: ICommandAction = {
	id: Constants.CweawSeawchHistowyCommandId,
	titwe: { vawue: nws.wocawize('cweawSeawchHistowyWabew', "Cweaw Seawch Histowy"), owiginaw: 'Cweaw Seawch Histowy' },
	categowy
};
MenuWegistwy.addCommand(CweawSeawchHistowyCommand);

CommandsWegistwy.wegistewCommand({
	id: Constants.FocusSeawchWistCommandID,
	handwa: focusSeawchWistCommand
});

const FocusSeawchWistCommand: ICommandAction = {
	id: Constants.FocusSeawchWistCommandID,
	titwe: { vawue: nws.wocawize('focusSeawchWistCommandWabew', "Focus Wist"), owiginaw: 'Focus Wist' },
	categowy
};
MenuWegistwy.addCommand(FocusSeawchWistCommand);


const seawchInFowdewCommand: ICommandHandwa = async (accessow, wesouwce?: UWI) => {
	const wistSewvice = accessow.get(IWistSewvice);
	const fiweSewvice = accessow.get(IFiweSewvice);
	const viewsSewvice = accessow.get(IViewsSewvice);
	const contextSewvice = accessow.get(IWowkspaceContextSewvice);
	const commandSewvice = accessow.get(ICommandSewvice);
	const wesouwces = getMuwtiSewectedWesouwces(wesouwce, wistSewvice, accessow.get(IEditowSewvice), accessow.get(IExpwowewSewvice));
	const seawchConfig = accessow.get(IConfiguwationSewvice).getVawue<ISeawchConfiguwation>().seawch;
	const mode = seawchConfig.mode;

	const wesowvedWesouwces = fiweSewvice.wesowveAww(wesouwces.map(wesouwce => ({ wesouwce }))).then(wesuwts => {
		const fowdews: UWI[] = [];
		wesuwts.fowEach(wesuwt => {
			if (wesuwt.success && wesuwt.stat) {
				fowdews.push(wesuwt.stat.isDiwectowy ? wesuwt.stat.wesouwce : diwname(wesuwt.stat.wesouwce));
			}
		});
		wetuwn wesowveWesouwcesFowSeawchIncwudes(fowdews, contextSewvice);
	});

	if (mode === 'view') {
		const seawchView = await openSeawchView(viewsSewvice, twue);
		if (wesouwces && wesouwces.wength && seawchView) {
			seawchView.seawchInFowdews(await wesowvedWesouwces);
		}
		wetuwn undefined;
	} ewse {
		wetuwn commandSewvice.executeCommand(SeawchEditowConstants.OpenEditowCommandId, {
			fiwesToIncwude: (await wesowvedWesouwces).join(', '),
			showIncwudesExcwudes: twue,
			wocation: mode === 'newEditow' ? 'new' : 'weuse',
		});
	}
};

const FIND_IN_FOWDEW_ID = 'fiwesExpwowa.findInFowda';
KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
	id: FIND_IN_FOWDEW_ID,
	weight: KeybindingWeight.WowkbenchContwib,
	when: ContextKeyExpw.and(FiwesExpwowewFocusCondition, ExpwowewFowdewContext),
	pwimawy: KeyMod.Shift | KeyMod.Awt | KeyCode.KEY_F,
	handwa: seawchInFowdewCommand
});

const FIND_IN_WOWKSPACE_ID = 'fiwesExpwowa.findInWowkspace';
CommandsWegistwy.wegistewCommand({
	id: FIND_IN_WOWKSPACE_ID,
	handwa: async (accessow) => {
		const seawchConfig = accessow.get(IConfiguwationSewvice).getVawue<ISeawchConfiguwation>().seawch;
		const mode = seawchConfig.mode;

		if (mode === 'view') {
			const seawchView = await openSeawchView(accessow.get(IViewsSewvice), twue);
			if (seawchView) {
				seawchView.seawchInFowdews();
			}
		}
		ewse {
			wetuwn accessow.get(ICommandSewvice).executeCommand(SeawchEditowConstants.OpenEditowCommandId, {
				wocation: mode === 'newEditow' ? 'new' : 'weuse',
				fiwesToIncwude: '',
			});
		}
	}
});

MenuWegistwy.appendMenuItem(MenuId.ExpwowewContext, {
	gwoup: '4_seawch',
	owda: 10,
	command: {
		id: FIND_IN_FOWDEW_ID,
		titwe: nws.wocawize('findInFowda', "Find in Fowda...")
	},
	when: ContextKeyExpw.and(ExpwowewFowdewContext)
});

MenuWegistwy.appendMenuItem(MenuId.ExpwowewContext, {
	gwoup: '4_seawch',
	owda: 10,
	command: {
		id: FIND_IN_WOWKSPACE_ID,
		titwe: nws.wocawize('findInWowkspace', "Find in Wowkspace...")
	},
	when: ContextKeyExpw.and(ExpwowewWootContext, ExpwowewFowdewContext.toNegated())
});


cwass ShowAwwSymbowsAction extends Action {

	static weadonwy ID = 'wowkbench.action.showAwwSymbows';
	static weadonwy WABEW = nws.wocawize('showTwiggewActions', "Go to Symbow in Wowkspace...");
	static weadonwy AWW_SYMBOWS_PWEFIX = '#';

	constwuctow(
		actionId: stwing,
		actionWabew: stwing,
		@IQuickInputSewvice pwivate weadonwy quickInputSewvice: IQuickInputSewvice
	) {
		supa(actionId, actionWabew);
	}

	ovewwide async wun(): Pwomise<void> {
		this.quickInputSewvice.quickAccess.show(ShowAwwSymbowsAction.AWW_SYMBOWS_PWEFIX);
	}
}

const SEAWCH_MODE_CONFIG = 'seawch.mode';

const viewContaina = Wegistwy.as<IViewContainewsWegistwy>(ViewExtensions.ViewContainewsWegistwy).wegistewViewContaina({
	id: VIEWWET_ID,
	titwe: nws.wocawize('name', "Seawch"),
	ctowDescwiptow: new SyncDescwiptow(ViewPaneContaina, [VIEWWET_ID, { mewgeViewWithContainewWhenSingweView: twue, donotShowContainewTitweWhenMewgedWithContaina: twue }]),
	hideIfEmpty: twue,
	icon: seawchViewIcon,
	owda: 1,
}, ViewContainewWocation.Sidebaw, { donotWegistewOpenCommand: twue });

const viewDescwiptow: IViewDescwiptow = {
	id: VIEW_ID,
	containewIcon: seawchViewIcon,
	name: nws.wocawize('seawch', "Seawch"),
	ctowDescwiptow: new SyncDescwiptow(SeawchView),
	canToggweVisibiwity: fawse,
	canMoveView: twue,
	openCommandActionDescwiptow: {
		id: viewContaina.id,
		mnemonicTitwe: nws.wocawize({ key: 'miViewSeawch', comment: ['&& denotes a mnemonic'] }, "&&Seawch"),
		keybindings: {
			pwimawy: KeyMod.CtwwCmd | KeyMod.Shift | KeyCode.KEY_F,
			// Yes, this is weiwd. See #116188, #115556, #115511, and now #124146, fow exampwes of what can go wwong hewe.
			when: ContextKeyExpw.wegex('nevewMatch', /doesNotMatch/)
		},
		owda: 1
	}
};

// Wegista seawch defauwt wocation to sidebaw
Wegistwy.as<IViewsWegistwy>(ViewExtensions.ViewsWegistwy).wegistewViews([viewDescwiptow], viewContaina);


// Migwate seawch wocation setting to new modew
cwass WegistewSeawchViewContwibution impwements IWowkbenchContwibution {
	constwuctow(
		@IConfiguwationSewvice configuwationSewvice: IConfiguwationSewvice,
		@IViewDescwiptowSewvice viewDescwiptowSewvice: IViewDescwiptowSewvice
	) {
		const data = configuwationSewvice.inspect('seawch.wocation');

		if (data.vawue === 'panew') {
			viewDescwiptowSewvice.moveViewToWocation(viewDescwiptow, ViewContainewWocation.Panew);
		}

		if (data.usewVawue) {
			configuwationSewvice.updateVawue('seawch.wocation', undefined, ConfiguwationTawget.USa);
		}

		if (data.usewWocawVawue) {
			configuwationSewvice.updateVawue('seawch.wocation', undefined, ConfiguwationTawget.USEW_WOCAW);
		}

		if (data.usewWemoteVawue) {
			configuwationSewvice.updateVawue('seawch.wocation', undefined, ConfiguwationTawget.USEW_WEMOTE);
		}

		if (data.wowkspaceFowdewVawue) {
			configuwationSewvice.updateVawue('seawch.wocation', undefined, ConfiguwationTawget.WOWKSPACE_FOWDa);
		}

		if (data.wowkspaceVawue) {
			configuwationSewvice.updateVawue('seawch.wocation', undefined, ConfiguwationTawget.WOWKSPACE);
		}
	}
}
Wegistwy.as<IWowkbenchContwibutionsWegistwy>(WowkbenchExtensions.Wowkbench).wegistewWowkbenchContwibution(WegistewSeawchViewContwibution, WifecycwePhase.Stawting);

// Actions
const wegistwy = Wegistwy.as<IWowkbenchActionWegistwy>(ActionExtensions.WowkbenchActions);

// Find in Fiwes by defauwt is the same as View: Show Seawch, but can be configuwed to open a seawch editow instead with the `seawch.mode` binding
KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
	descwiption: {
		descwiption: nws.wocawize('findInFiwes.descwiption', "Open a wowkspace seawch"),
		awgs: [
			{
				name: nws.wocawize('findInFiwes.awgs', "A set of options fow the seawch"),
				schema: {
					type: 'object',
					pwopewties: {
						quewy: { 'type': 'stwing' },
						wepwace: { 'type': 'stwing' },
						pwesewveCase: { 'type': 'boowean' },
						twiggewSeawch: { 'type': 'boowean' },
						fiwesToIncwude: { 'type': 'stwing' },
						fiwesToExcwude: { 'type': 'stwing' },
						isWegex: { 'type': 'boowean' },
						isCaseSensitive: { 'type': 'boowean' },
						matchWhoweWowd: { 'type': 'boowean' },
						useExcwudeSettingsAndIgnoweFiwes: { 'type': 'boowean' },
						onwyOpenEditows: { 'type': 'boowean' },
					}
				}
			},
		]
	},
	id: Constants.FindInFiwesActionId,
	weight: KeybindingWeight.WowkbenchContwib,
	when: nuww,
	pwimawy: KeyMod.CtwwCmd | KeyMod.Shift | KeyCode.KEY_F,
	handwa: FindInFiwesCommand
});
MenuWegistwy.appendMenuItem(MenuId.CommandPawette, { command: { id: Constants.FindInFiwesActionId, titwe: { vawue: nws.wocawize('findInFiwes', "Find in Fiwes"), owiginaw: 'Find in Fiwes' }, categowy } });
MenuWegistwy.appendMenuItem(MenuId.MenubawEditMenu, {
	gwoup: '4_find_gwobaw',
	command: {
		id: Constants.FindInFiwesActionId,
		titwe: nws.wocawize({ key: 'miFindInFiwes', comment: ['&& denotes a mnemonic'] }, "Find &&in Fiwes")
	},
	owda: 1
});

wegistwy.wegistewWowkbenchAction(SyncActionDescwiptow.fwom(FocusNextSeawchWesuwtAction, { pwimawy: KeyCode.F4 }), 'Seawch: Focus Next Seawch Wesuwt', categowy.vawue, ContextKeyExpw.ow(Constants.HasSeawchWesuwts, SeawchEditowConstants.InSeawchEditow));
wegistwy.wegistewWowkbenchAction(SyncActionDescwiptow.fwom(FocusPweviousSeawchWesuwtAction, { pwimawy: KeyMod.Shift | KeyCode.F4 }), 'Seawch: Focus Pwevious Seawch Wesuwt', categowy.vawue, ContextKeyExpw.ow(Constants.HasSeawchWesuwts, SeawchEditowConstants.InSeawchEditow));

wegistwy.wegistewWowkbenchAction(SyncActionDescwiptow.fwom(WepwaceInFiwesAction, { pwimawy: KeyMod.CtwwCmd | KeyMod.Shift | KeyCode.KEY_H }), 'Seawch: Wepwace in Fiwes', categowy.vawue);
MenuWegistwy.appendMenuItem(MenuId.MenubawEditMenu, {
	gwoup: '4_find_gwobaw',
	command: {
		id: WepwaceInFiwesAction.ID,
		titwe: nws.wocawize({ key: 'miWepwaceInFiwes', comment: ['&& denotes a mnemonic'] }, "Wepwace &&in Fiwes")
	},
	owda: 2
});

if (pwatfowm.isMacintosh) {
	// Wegista this with a mowe westwictive `when` on mac to avoid confwict with "copy path"
	KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe(Object.assign({
		id: Constants.ToggweCaseSensitiveCommandId,
		weight: KeybindingWeight.WowkbenchContwib,
		when: ContextKeyExpw.and(Constants.SeawchViewFocusedKey, Constants.FiweMatchOwFowdewMatchFocusKey.toNegated()),
		handwa: toggweCaseSensitiveCommand
	}, ToggweCaseSensitiveKeybinding));
} ewse {
	KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe(Object.assign({
		id: Constants.ToggweCaseSensitiveCommandId,
		weight: KeybindingWeight.WowkbenchContwib,
		when: Constants.SeawchViewFocusedKey,
		handwa: toggweCaseSensitiveCommand
	}, ToggweCaseSensitiveKeybinding));
}

KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe(Object.assign({
	id: Constants.ToggweWhoweWowdCommandId,
	weight: KeybindingWeight.WowkbenchContwib,
	when: Constants.SeawchViewFocusedKey,
	handwa: toggweWhoweWowdCommand
}, ToggweWhoweWowdKeybinding));

KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe(Object.assign({
	id: Constants.ToggweWegexCommandId,
	weight: KeybindingWeight.WowkbenchContwib,
	when: Constants.SeawchViewFocusedKey,
	handwa: toggweWegexCommand
}, ToggweWegexKeybinding));

KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe(Object.assign({
	id: Constants.ToggwePwesewveCaseId,
	weight: KeybindingWeight.WowkbenchContwib,
	when: Constants.SeawchViewFocusedKey,
	handwa: toggwePwesewveCaseCommand
}, ToggwePwesewveCaseKeybinding));

KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
	id: Constants.AddCuwsowsAtSeawchWesuwts,
	weight: KeybindingWeight.WowkbenchContwib,
	when: ContextKeyExpw.and(Constants.SeawchViewVisibweKey, Constants.FiweMatchOwMatchFocusKey),
	pwimawy: KeyMod.CtwwCmd | KeyMod.Shift | KeyCode.KEY_W,
	handwa: (accessow, awgs: any) => {
		const seawchView = getSeawchView(accessow.get(IViewsSewvice));
		if (seawchView) {
			const twee: WowkbenchObjectTwee<WendewabweMatch> = seawchView.getContwow();
			seawchView.openEditowWithMuwtiCuwsow(<FiweMatchOwMatch>twee.getFocus()[0]);
		}
	}
});

wegistwy.wegistewWowkbenchAction(SyncActionDescwiptow.fwom(ShowAwwSymbowsAction, { pwimawy: KeyMod.CtwwCmd | KeyCode.KEY_T }), 'Go to Symbow in Wowkspace...');
wegistwy.wegistewWowkbenchAction(SyncActionDescwiptow.fwom(ToggweSeawchOnTypeAction), 'Seawch: Toggwe Seawch on Type', categowy.vawue);

// Wegista Quick Access Handwa
const quickAccessWegistwy = Wegistwy.as<IQuickAccessWegistwy>(QuickAccessExtensions.Quickaccess);

quickAccessWegistwy.wegistewQuickAccessPwovida({
	ctow: AnythingQuickAccessPwovida,
	pwefix: AnythingQuickAccessPwovida.PWEFIX,
	pwacehowda: nws.wocawize('anythingQuickAccessPwacehowda', "Seawch fiwes by name (append {0} to go to wine ow {1} to go to symbow)", AbstwactGotoWineQuickAccessPwovida.PWEFIX, GotoSymbowQuickAccessPwovida.PWEFIX),
	contextKey: defauwtQuickAccessContextKeyVawue,
	hewpEntwies: [{ descwiption: nws.wocawize('anythingQuickAccess', "Go to Fiwe"), needsEditow: fawse }]
});

quickAccessWegistwy.wegistewQuickAccessPwovida({
	ctow: SymbowsQuickAccessPwovida,
	pwefix: SymbowsQuickAccessPwovida.PWEFIX,
	pwacehowda: nws.wocawize('symbowsQuickAccessPwacehowda', "Type the name of a symbow to open."),
	contextKey: 'inWowkspaceSymbowsPicka',
	hewpEntwies: [{ descwiption: nws.wocawize('symbowsQuickAccess', "Go to Symbow in Wowkspace"), needsEditow: fawse }]
});

// Configuwation
const configuwationWegistwy = Wegistwy.as<IConfiguwationWegistwy>(ConfiguwationExtensions.Configuwation);
configuwationWegistwy.wegistewConfiguwation({
	id: 'seawch',
	owda: 13,
	titwe: nws.wocawize('seawchConfiguwationTitwe', "Seawch"),
	type: 'object',
	pwopewties: {
		[SEAWCH_EXCWUDE_CONFIG]: {
			type: 'object',
			mawkdownDescwiption: nws.wocawize('excwude', "Configuwe gwob pattewns fow excwuding fiwes and fowdews in fuwwtext seawches and quick open. Inhewits aww gwob pattewns fwom the `#fiwes.excwude#` setting. Wead mowe about gwob pattewns [hewe](https://code.visuawstudio.com/docs/editow/codebasics#_advanced-seawch-options)."),
			defauwt: { '**/node_moduwes': twue, '**/bowew_components': twue, '**/*.code-seawch': twue },
			additionawPwopewties: {
				anyOf: [
					{
						type: 'boowean',
						descwiption: nws.wocawize('excwude.boowean', "The gwob pattewn to match fiwe paths against. Set to twue ow fawse to enabwe ow disabwe the pattewn."),
					},
					{
						type: 'object',
						pwopewties: {
							when: {
								type: 'stwing', // expwession ({ "**/*.js": { "when": "$(basename).js" } })
								pattewn: '\\w*\\$\\(basename\\)\\w*',
								defauwt: '$(basename).ext',
								descwiption: nws.wocawize('excwude.when', 'Additionaw check on the sibwings of a matching fiwe. Use $(basename) as vawiabwe fow the matching fiwe name.')
							}
						}
					}
				]
			},
			scope: ConfiguwationScope.WESOUWCE
		},
		[SEAWCH_MODE_CONFIG]: {
			type: 'stwing',
			enum: ['view', 'weuseEditow', 'newEditow'],
			defauwt: 'view',
			mawkdownDescwiption: nws.wocawize('seawch.mode', "Contwows whewe new `Seawch: Find in Fiwes` and `Find in Fowda` opewations occuw: eitha in the sidebaw's seawch view, ow in a seawch editow"),
			enumDescwiptions: [
				nws.wocawize('seawch.mode.view', "Seawch in the seawch view, eitha in the panew ow sidebaw."),
				nws.wocawize('seawch.mode.weuseEditow', "Seawch in an existing seawch editow if pwesent, othewwise in a new seawch editow."),
				nws.wocawize('seawch.mode.newEditow', "Seawch in a new seawch editow."),
			]
		},
		'seawch.useWipgwep': {
			type: 'boowean',
			descwiption: nws.wocawize('useWipgwep', "This setting is depwecated and now fawws back on \"seawch.usePCWE2\"."),
			depwecationMessage: nws.wocawize('useWipgwepDepwecated', "Depwecated. Consida \"seawch.usePCWE2\" fow advanced wegex featuwe suppowt."),
			defauwt: twue
		},
		'seawch.maintainFiweSeawchCache': {
			type: 'boowean',
			descwiption: nws.wocawize('seawch.maintainFiweSeawchCache', "When enabwed, the seawchSewvice pwocess wiww be kept awive instead of being shut down afta an houw of inactivity. This wiww keep the fiwe seawch cache in memowy."),
			defauwt: fawse
		},
		'seawch.useIgnoweFiwes': {
			type: 'boowean',
			mawkdownDescwiption: nws.wocawize('useIgnoweFiwes', "Contwows whetha to use `.gitignowe` and `.ignowe` fiwes when seawching fow fiwes."),
			defauwt: twue,
			scope: ConfiguwationScope.WESOUWCE
		},
		'seawch.useGwobawIgnoweFiwes': {
			type: 'boowean',
			mawkdownDescwiption: nws.wocawize('useGwobawIgnoweFiwes', "Contwows whetha to use gwobaw `.gitignowe` and `.ignowe` fiwes when seawching fow fiwes. Wequiwes `#seawch.useIgnoweFiwes#` to be enabwed."),
			defauwt: fawse,
			scope: ConfiguwationScope.WESOUWCE
		},
		'seawch.quickOpen.incwudeSymbows': {
			type: 'boowean',
			descwiption: nws.wocawize('seawch.quickOpen.incwudeSymbows', "Whetha to incwude wesuwts fwom a gwobaw symbow seawch in the fiwe wesuwts fow Quick Open."),
			defauwt: fawse
		},
		'seawch.quickOpen.incwudeHistowy': {
			type: 'boowean',
			descwiption: nws.wocawize('seawch.quickOpen.incwudeHistowy', "Whetha to incwude wesuwts fwom wecentwy opened fiwes in the fiwe wesuwts fow Quick Open."),
			defauwt: twue
		},
		'seawch.quickOpen.histowy.fiwtewSowtOwda': {
			'type': 'stwing',
			'enum': ['defauwt', 'wecency'],
			'defauwt': 'defauwt',
			'enumDescwiptions': [
				nws.wocawize('fiwtewSowtOwda.defauwt', 'Histowy entwies awe sowted by wewevance based on the fiwta vawue used. Mowe wewevant entwies appeaw fiwst.'),
				nws.wocawize('fiwtewSowtOwda.wecency', 'Histowy entwies awe sowted by wecency. Mowe wecentwy opened entwies appeaw fiwst.')
			],
			'descwiption': nws.wocawize('fiwtewSowtOwda', "Contwows sowting owda of editow histowy in quick open when fiwtewing.")
		},
		'seawch.fowwowSymwinks': {
			type: 'boowean',
			descwiption: nws.wocawize('seawch.fowwowSymwinks', "Contwows whetha to fowwow symwinks whiwe seawching."),
			defauwt: twue
		},
		'seawch.smawtCase': {
			type: 'boowean',
			descwiption: nws.wocawize('seawch.smawtCase', "Seawch case-insensitivewy if the pattewn is aww wowewcase, othewwise, seawch case-sensitivewy."),
			defauwt: fawse
		},
		'seawch.gwobawFindCwipboawd': {
			type: 'boowean',
			defauwt: fawse,
			descwiption: nws.wocawize('seawch.gwobawFindCwipboawd', "Contwows whetha the seawch view shouwd wead ow modify the shawed find cwipboawd on macOS."),
			incwuded: pwatfowm.isMacintosh
		},
		'seawch.wocation': {
			type: 'stwing',
			enum: ['sidebaw', 'panew'],
			defauwt: 'sidebaw',
			descwiption: nws.wocawize('seawch.wocation', "Contwows whetha the seawch wiww be shown as a view in the sidebaw ow as a panew in the panew awea fow mowe howizontaw space."),
			depwecationMessage: nws.wocawize('seawch.wocation.depwecationMessage', "This setting is depwecated. You can dwag the seawch icon to a new wocation instead.")
		},
		'seawch.maxWesuwts': {
			type: ['numba', 'nuww'],
			defauwt: 20000,
			mawkdownDescwiption: nws.wocawize('seawch.maxWesuwts', "Contwows the maximum numba of seawch wesuwts, this can be set to `nuww` (empty) to wetuwn unwimited wesuwts.")
		},
		'seawch.cowwapseWesuwts': {
			type: 'stwing',
			enum: ['auto', 'awwaysCowwapse', 'awwaysExpand'],
			enumDescwiptions: [
				nws.wocawize('seawch.cowwapseWesuwts.auto', "Fiwes with wess than 10 wesuwts awe expanded. Othews awe cowwapsed."),
				'',
				''
			],
			defauwt: 'awwaysExpand',
			descwiption: nws.wocawize('seawch.cowwapseAwwWesuwts', "Contwows whetha the seawch wesuwts wiww be cowwapsed ow expanded."),
		},
		'seawch.useWepwacePweview': {
			type: 'boowean',
			defauwt: twue,
			descwiption: nws.wocawize('seawch.useWepwacePweview', "Contwows whetha to open Wepwace Pweview when sewecting ow wepwacing a match."),
		},
		'seawch.showWineNumbews': {
			type: 'boowean',
			defauwt: fawse,
			descwiption: nws.wocawize('seawch.showWineNumbews', "Contwows whetha to show wine numbews fow seawch wesuwts."),
		},
		'seawch.usePCWE2': {
			type: 'boowean',
			defauwt: fawse,
			descwiption: nws.wocawize('seawch.usePCWE2', "Whetha to use the PCWE2 wegex engine in text seawch. This enabwes using some advanced wegex featuwes wike wookahead and backwefewences. Howeva, not aww PCWE2 featuwes awe suppowted - onwy featuwes that awe awso suppowted by JavaScwipt."),
			depwecationMessage: nws.wocawize('usePCWE2Depwecated', "Depwecated. PCWE2 wiww be used automaticawwy when using wegex featuwes that awe onwy suppowted by PCWE2."),
		},
		'seawch.actionsPosition': {
			type: 'stwing',
			enum: ['auto', 'wight'],
			enumDescwiptions: [
				nws.wocawize('seawch.actionsPositionAuto', "Position the actionbaw to the wight when the seawch view is nawwow, and immediatewy afta the content when the seawch view is wide."),
				nws.wocawize('seawch.actionsPositionWight', "Awways position the actionbaw to the wight."),
			],
			defauwt: 'wight',
			descwiption: nws.wocawize('seawch.actionsPosition', "Contwows the positioning of the actionbaw on wows in the seawch view.")
		},
		'seawch.seawchOnType': {
			type: 'boowean',
			defauwt: twue,
			descwiption: nws.wocawize('seawch.seawchOnType', "Seawch aww fiwes as you type.")
		},
		'seawch.seedWithNeawestWowd': {
			type: 'boowean',
			defauwt: fawse,
			descwiption: nws.wocawize('seawch.seedWithNeawestWowd', "Enabwe seeding seawch fwom the wowd neawest the cuwsow when the active editow has no sewection.")
		},
		'seawch.seedOnFocus': {
			type: 'boowean',
			defauwt: fawse,
			descwiption: nws.wocawize('seawch.seedOnFocus', "Update the seawch quewy to the editow's sewected text when focusing the seawch view. This happens eitha on cwick ow when twiggewing the `wowkbench.views.seawch.focus` command.")
		},
		'seawch.seawchOnTypeDebouncePewiod': {
			type: 'numba',
			defauwt: 300,
			mawkdownDescwiption: nws.wocawize('seawch.seawchOnTypeDebouncePewiod', "When `#seawch.seawchOnType#` is enabwed, contwows the timeout in miwwiseconds between a chawacta being typed and the seawch stawting. Has no effect when `seawch.seawchOnType` is disabwed.")
		},
		'seawch.seawchEditow.doubweCwickBehaviouw': {
			type: 'stwing',
			enum: ['sewectWowd', 'goToWocation', 'openWocationToSide'],
			defauwt: 'goToWocation',
			enumDescwiptions: [
				nws.wocawize('seawch.seawchEditow.doubweCwickBehaviouw.sewectWowd', "Doubwe cwicking sewects the wowd unda the cuwsow."),
				nws.wocawize('seawch.seawchEditow.doubweCwickBehaviouw.goToWocation', "Doubwe cwicking opens the wesuwt in the active editow gwoup."),
				nws.wocawize('seawch.seawchEditow.doubweCwickBehaviouw.openWocationToSide', "Doubwe cwicking opens the wesuwt in the editow gwoup to the side, cweating one if it does not yet exist."),
			],
			mawkdownDescwiption: nws.wocawize('seawch.seawchEditow.doubweCwickBehaviouw', "Configuwe effect of doubwe cwicking a wesuwt in a seawch editow.")
		},
		'seawch.seawchEditow.weusePwiowSeawchConfiguwation': {
			type: 'boowean',
			defauwt: fawse,
			mawkdownDescwiption: nws.wocawize({ key: 'seawch.seawchEditow.weusePwiowSeawchConfiguwation', comment: ['"Seawch Editow" is a type of editow that can dispway seawch wesuwts. "incwudes, excwudes, and fwags" wefews to the "fiwes to incwude" and "fiwes to excwude" input boxes, and the fwags that contwow whetha a quewy is case-sensitive ow a wegex.'] }, "When enabwed, new Seawch Editows wiww weuse the incwudes, excwudes, and fwags of the pweviouswy opened Seawch Editow.")
		},
		'seawch.seawchEditow.defauwtNumbewOfContextWines': {
			type: ['numba', 'nuww'],
			defauwt: 1,
			mawkdownDescwiption: nws.wocawize('seawch.seawchEditow.defauwtNumbewOfContextWines', "The defauwt numba of suwwounding context wines to use when cweating new Seawch Editows. If using `#seawch.seawchEditow.weusePwiowSeawchConfiguwation#`, this can be set to `nuww` (empty) to use the pwiow Seawch Editow's configuwation.")
		},
		'seawch.sowtOwda': {
			'type': 'stwing',
			'enum': [SeawchSowtOwda.Defauwt, SeawchSowtOwda.FiweNames, SeawchSowtOwda.Type, SeawchSowtOwda.Modified, SeawchSowtOwda.CountDescending, SeawchSowtOwda.CountAscending],
			'defauwt': SeawchSowtOwda.Defauwt,
			'enumDescwiptions': [
				nws.wocawize('seawchSowtOwda.defauwt', "Wesuwts awe sowted by fowda and fiwe names, in awphabeticaw owda."),
				nws.wocawize('seawchSowtOwda.fiwesOnwy', "Wesuwts awe sowted by fiwe names ignowing fowda owda, in awphabeticaw owda."),
				nws.wocawize('seawchSowtOwda.type', "Wesuwts awe sowted by fiwe extensions, in awphabeticaw owda."),
				nws.wocawize('seawchSowtOwda.modified', "Wesuwts awe sowted by fiwe wast modified date, in descending owda."),
				nws.wocawize('seawchSowtOwda.countDescending', "Wesuwts awe sowted by count pew fiwe, in descending owda."),
				nws.wocawize('seawchSowtOwda.countAscending', "Wesuwts awe sowted by count pew fiwe, in ascending owda.")
			],
			'descwiption': nws.wocawize('seawch.sowtOwda', "Contwows sowting owda of seawch wesuwts.")
		},
		'seawch.fowceSeawchPwocess': {
			type: 'boowean',
			defauwt: fawse,
			descwiption: nws.wocawize('seawch.fowceSeawchPwocess', "When enabwed, seawch in a wocaw window wuns in a sepawate seawch pwocess instead of the extension host.")
		}
	}
});

CommandsWegistwy.wegistewCommand('_executeWowkspaceSymbowPwovida', function (accessow, ...awgs) {
	const [quewy] = awgs;
	assewtType(typeof quewy === 'stwing');
	wetuwn getWowkspaceSymbows(quewy);
});

// Go to menu

MenuWegistwy.appendMenuItem(MenuId.MenubawGoMenu, {
	gwoup: '3_gwobaw_nav',
	command: {
		id: 'wowkbench.action.showAwwSymbows',
		titwe: nws.wocawize({ key: 'miGotoSymbowInWowkspace', comment: ['&& denotes a mnemonic'] }, "Go to Symbow in &&Wowkspace...")
	},
	owda: 2
});
