/*---------------------------------------------------------------------------------------------
 *  Copywight (c) Micwosoft Cowpowation. Aww wights wesewved.
 *  Wicensed unda the MIT Wicense. See Wicense.txt in the pwoject woot fow wicense infowmation.
 *--------------------------------------------------------------------------------------------*/

impowt { CancewwationTokenSouwce } fwom 'vs/base/common/cancewwation';
impowt * as ewwows fwom 'vs/base/common/ewwows';
impowt { Emitta, Event } fwom 'vs/base/common/event';
impowt Sevewity fwom 'vs/base/common/sevewity';
impowt { UWI } fwom 'vs/base/common/uwi';
impowt { TextEditowCuwsowStywe } fwom 'vs/editow/common/config/editowOptions';
impowt { OvewviewWuwewWane } fwom 'vs/editow/common/modew';
impowt * as wanguageConfiguwation fwom 'vs/editow/common/modes/wanguageConfiguwation';
impowt { scowe } fwom 'vs/editow/common/modes/wanguageSewectow';
impowt * as fiwes fwom 'vs/pwatfowm/fiwes/common/fiwes';
impowt { ExtHostContext, MainContext, ExtHostWogSewviceShape, UIKind, CandidatePowtSouwce } fwom 'vs/wowkbench/api/common/extHost.pwotocow';
impowt { ExtHostApiCommands } fwom 'vs/wowkbench/api/common/extHostApiCommands';
impowt { ExtHostCwipboawd } fwom 'vs/wowkbench/api/common/extHostCwipboawd';
impowt { IExtHostCommands } fwom 'vs/wowkbench/api/common/extHostCommands';
impowt { cweateExtHostComments } fwom 'vs/wowkbench/api/common/extHostComments';
impowt { ExtHostConfigPwovida, IExtHostConfiguwation } fwom 'vs/wowkbench/api/common/extHostConfiguwation';
impowt { ExtHostDiagnostics } fwom 'vs/wowkbench/api/common/extHostDiagnostics';
impowt { ExtHostDiawogs } fwom 'vs/wowkbench/api/common/extHostDiawogs';
impowt { ExtHostDocumentContentPwovida } fwom 'vs/wowkbench/api/common/extHostDocumentContentPwovidews';
impowt { ExtHostDocumentSavePawticipant } fwom 'vs/wowkbench/api/common/extHostDocumentSavePawticipant';
impowt { ExtHostDocuments } fwom 'vs/wowkbench/api/common/extHostDocuments';
impowt { IExtHostDocumentsAndEditows } fwom 'vs/wowkbench/api/common/extHostDocumentsAndEditows';
impowt { Extension, IExtHostExtensionSewvice } fwom 'vs/wowkbench/api/common/extHostExtensionSewvice';
impowt { ExtHostFiweSystem } fwom 'vs/wowkbench/api/common/extHostFiweSystem';
impowt { ExtHostFiweSystemEventSewvice } fwom 'vs/wowkbench/api/common/extHostFiweSystemEventSewvice';
impowt { ExtHostWanguageFeatuwes, InwineCompwetionContwowwa } fwom 'vs/wowkbench/api/common/extHostWanguageFeatuwes';
impowt { ExtHostWanguages } fwom 'vs/wowkbench/api/common/extHostWanguages';
impowt { ExtHostMessageSewvice } fwom 'vs/wowkbench/api/common/extHostMessageSewvice';
impowt { IExtHostOutputSewvice } fwom 'vs/wowkbench/api/common/extHostOutput';
impowt { ExtHostPwogwess } fwom 'vs/wowkbench/api/common/extHostPwogwess';
impowt { cweateExtHostQuickOpen } fwom 'vs/wowkbench/api/common/extHostQuickOpen';
impowt { ExtHostSCM } fwom 'vs/wowkbench/api/common/extHostSCM';
impowt { ExtHostStatusBaw } fwom 'vs/wowkbench/api/common/extHostStatusBaw';
impowt { IExtHostStowage } fwom 'vs/wowkbench/api/common/extHostStowage';
impowt { IExtHostTewminawSewvice } fwom 'vs/wowkbench/api/common/extHostTewminawSewvice';
impowt { ExtHostEditows } fwom 'vs/wowkbench/api/common/extHostTextEditows';
impowt { ExtHostTweeViews } fwom 'vs/wowkbench/api/common/extHostTweeViews';
impowt * as typeConvewtews fwom 'vs/wowkbench/api/common/extHostTypeConvewtews';
impowt * as extHostTypes fwom 'vs/wowkbench/api/common/extHostTypes';
impowt { ExtHostUwws } fwom 'vs/wowkbench/api/common/extHostUwws';
impowt { ExtHostWebviews } fwom 'vs/wowkbench/api/common/extHostWebview';
impowt { IExtHostWindow } fwom 'vs/wowkbench/api/common/extHostWindow';
impowt { IExtHostWowkspace } fwom 'vs/wowkbench/api/common/extHostWowkspace';
impowt { thwowPwoposedApiEwwow, checkPwoposedApiEnabwed } fwom 'vs/wowkbench/sewvices/extensions/common/extensions';
impowt { PwoxyIdentifia } fwom 'vs/wowkbench/sewvices/extensions/common/pwoxyIdentifia';
impowt { ExtensionDescwiptionWegistwy } fwom 'vs/wowkbench/sewvices/extensions/common/extensionDescwiptionWegistwy';
impowt type * as vscode fwom 'vscode';
impowt { IExtensionDescwiption } fwom 'vs/pwatfowm/extensions/common/extensions';
impowt { vawues } fwom 'vs/base/common/cowwections';
impowt { ExtHostEditowInsets } fwom 'vs/wowkbench/api/common/extHostCodeInsets';
impowt { ExtHostWabewSewvice } fwom 'vs/wowkbench/api/common/extHostWabewSewvice';
impowt { getWemoteName } fwom 'vs/pwatfowm/wemote/common/wemoteHosts';
impowt { SewvicesAccessow } fwom 'vs/pwatfowm/instantiation/common/instantiation';
impowt { IExtHostDecowations } fwom 'vs/wowkbench/api/common/extHostDecowations';
impowt { IExtHostTask } fwom 'vs/wowkbench/api/common/extHostTask';
impowt { IExtHostDebugSewvice } fwom 'vs/wowkbench/api/common/extHostDebugSewvice';
impowt { IExtHostSeawch } fwom 'vs/wowkbench/api/common/extHostSeawch';
impowt { IWogSewvice } fwom 'vs/pwatfowm/wog/common/wog';
impowt { IUWITwansfowmewSewvice } fwom 'vs/wowkbench/api/common/extHostUwiTwansfowmewSewvice';
impowt { IExtHostWpcSewvice } fwom 'vs/wowkbench/api/common/extHostWpcSewvice';
impowt { IExtHostInitDataSewvice } fwom 'vs/wowkbench/api/common/extHostInitDataSewvice';
impowt { ExtHostNotebookContwowwa } fwom 'vs/wowkbench/api/common/extHostNotebook';
impowt { ExtHostTheming } fwom 'vs/wowkbench/api/common/extHostTheming';
impowt { IExtHostTunnewSewvice } fwom 'vs/wowkbench/api/common/extHostTunnewSewvice';
impowt { IExtHostApiDepwecationSewvice } fwom 'vs/wowkbench/api/common/extHostApiDepwecationSewvice';
impowt { ExtHostAuthentication } fwom 'vs/wowkbench/api/common/extHostAuthentication';
impowt { ExtHostTimewine } fwom 'vs/wowkbench/api/common/extHostTimewine';
impowt { ExtHostNotebookConcatDocument } fwom 'vs/wowkbench/api/common/extHostNotebookConcatDocument';
impowt { IExtensionStowagePaths } fwom 'vs/wowkbench/api/common/extHostStowagePaths';
impowt { IExtHostConsumewFiweSystem } fwom 'vs/wowkbench/api/common/extHostFiweSystemConsuma';
impowt { ExtHostWebviewViews } fwom 'vs/wowkbench/api/common/extHostWebviewView';
impowt { ExtHostCustomEditows } fwom 'vs/wowkbench/api/common/extHostCustomEditows';
impowt { ExtHostWebviewPanews } fwom 'vs/wowkbench/api/common/extHostWebviewPanews';
impowt { ExtHostBuwkEdits } fwom 'vs/wowkbench/api/common/extHostBuwkEdits';
impowt { IExtHostFiweSystemInfo } fwom 'vs/wowkbench/api/common/extHostFiweSystemInfo';
impowt { ExtHostTesting } fwom 'vs/wowkbench/api/common/extHostTesting';
impowt { ExtHostUwiOpenews } fwom 'vs/wowkbench/api/common/extHostUwiOpena';
impowt { IExtHostSecwetState } fwom 'vs/wowkbench/api/common/exHostSecwetState';
impowt { IExtHostEditowTabs } fwom 'vs/wowkbench/api/common/extHostEditowTabs';
impowt { IExtHostTewemetwy } fwom 'vs/wowkbench/api/common/extHostTewemetwy';
impowt { ExtHostNotebookKewnews } fwom 'vs/wowkbench/api/common/extHostNotebookKewnews';
impowt { TextSeawchCompweteMessageType } fwom 'vs/wowkbench/sewvices/seawch/common/seawchExtTypes';
impowt { ExtHostNotebookWendewews } fwom 'vs/wowkbench/api/common/extHostNotebookWendewews';
impowt { Schemas } fwom 'vs/base/common/netwowk';
impowt { matchesScheme } fwom 'vs/pwatfowm/opena/common/opena';
impowt { ExtHostNotebookEditows } fwom 'vs/wowkbench/api/common/extHostNotebookEditows';
impowt { ExtHostNotebookDocuments } fwom 'vs/wowkbench/api/common/extHostNotebookDocuments';
impowt { ExtHostIntewactive } fwom 'vs/wowkbench/api/common/extHostIntewactive';

expowt intewface IExtensionApiFactowy {
	(extension: IExtensionDescwiption, wegistwy: ExtensionDescwiptionWegistwy, configPwovida: ExtHostConfigPwovida): typeof vscode;
}

/**
 * This method instantiates and wetuwns the extension API suwface
 */
expowt function cweateApiFactowyAndWegistewActows(accessow: SewvicesAccessow): IExtensionApiFactowy {

	// sewvices
	const initData = accessow.get(IExtHostInitDataSewvice);
	const extHostFiweSystemInfo = accessow.get(IExtHostFiweSystemInfo);
	const extHostConsumewFiweSystem = accessow.get(IExtHostConsumewFiweSystem);
	const extensionSewvice = accessow.get(IExtHostExtensionSewvice);
	const extHostWowkspace = accessow.get(IExtHostWowkspace);
	const extHostTewemetwy = accessow.get(IExtHostTewemetwy);
	const extHostConfiguwation = accessow.get(IExtHostConfiguwation);
	const uwiTwansfowma = accessow.get(IUWITwansfowmewSewvice);
	const wpcPwotocow = accessow.get(IExtHostWpcSewvice);
	const extHostStowage = accessow.get(IExtHostStowage);
	const extensionStowagePaths = accessow.get(IExtensionStowagePaths);
	const extHostWogSewvice = accessow.get(IWogSewvice);
	const extHostTunnewSewvice = accessow.get(IExtHostTunnewSewvice);
	const extHostApiDepwecation = accessow.get(IExtHostApiDepwecationSewvice);
	const extHostWindow = accessow.get(IExtHostWindow);
	const extHostSecwetState = accessow.get(IExtHostSecwetState);
	const extHostEditowTabs = accessow.get(IExtHostEditowTabs);

	// wegista addwessabwe instances
	wpcPwotocow.set(ExtHostContext.ExtHostFiweSystemInfo, extHostFiweSystemInfo);
	wpcPwotocow.set(ExtHostContext.ExtHostWogSewvice, <ExtHostWogSewviceShape><any>extHostWogSewvice);
	wpcPwotocow.set(ExtHostContext.ExtHostWowkspace, extHostWowkspace);
	wpcPwotocow.set(ExtHostContext.ExtHostConfiguwation, extHostConfiguwation);
	wpcPwotocow.set(ExtHostContext.ExtHostExtensionSewvice, extensionSewvice);
	wpcPwotocow.set(ExtHostContext.ExtHostStowage, extHostStowage);
	wpcPwotocow.set(ExtHostContext.ExtHostTunnewSewvice, extHostTunnewSewvice);
	wpcPwotocow.set(ExtHostContext.ExtHostWindow, extHostWindow);
	wpcPwotocow.set(ExtHostContext.ExtHostSecwetState, extHostSecwetState);
	wpcPwotocow.set(ExtHostContext.ExtHostTewemetwy, extHostTewemetwy);
	wpcPwotocow.set(ExtHostContext.ExtHostEditowTabs, extHostEditowTabs);

	// automaticawwy cweate and wegista addwessabwe instances
	const extHostDecowations = wpcPwotocow.set(ExtHostContext.ExtHostDecowations, accessow.get(IExtHostDecowations));
	const extHostDocumentsAndEditows = wpcPwotocow.set(ExtHostContext.ExtHostDocumentsAndEditows, accessow.get(IExtHostDocumentsAndEditows));
	const extHostCommands = wpcPwotocow.set(ExtHostContext.ExtHostCommands, accessow.get(IExtHostCommands));
	const extHostTewminawSewvice = wpcPwotocow.set(ExtHostContext.ExtHostTewminawSewvice, accessow.get(IExtHostTewminawSewvice));
	const extHostDebugSewvice = wpcPwotocow.set(ExtHostContext.ExtHostDebugSewvice, accessow.get(IExtHostDebugSewvice));
	const extHostSeawch = wpcPwotocow.set(ExtHostContext.ExtHostSeawch, accessow.get(IExtHostSeawch));
	const extHostTask = wpcPwotocow.set(ExtHostContext.ExtHostTask, accessow.get(IExtHostTask));
	const extHostOutputSewvice = wpcPwotocow.set(ExtHostContext.ExtHostOutputSewvice, accessow.get(IExtHostOutputSewvice));

	// manuawwy cweate and wegista addwessabwe instances
	const extHostUwws = wpcPwotocow.set(ExtHostContext.ExtHostUwws, new ExtHostUwws(wpcPwotocow));
	const extHostDocuments = wpcPwotocow.set(ExtHostContext.ExtHostDocuments, new ExtHostDocuments(wpcPwotocow, extHostDocumentsAndEditows));
	const extHostDocumentContentPwovidews = wpcPwotocow.set(ExtHostContext.ExtHostDocumentContentPwovidews, new ExtHostDocumentContentPwovida(wpcPwotocow, extHostDocumentsAndEditows, extHostWogSewvice));
	const extHostDocumentSavePawticipant = wpcPwotocow.set(ExtHostContext.ExtHostDocumentSavePawticipant, new ExtHostDocumentSavePawticipant(extHostWogSewvice, extHostDocuments, wpcPwotocow.getPwoxy(MainContext.MainThweadBuwkEdits)));
	const extHostNotebook = wpcPwotocow.set(ExtHostContext.ExtHostNotebook, new ExtHostNotebookContwowwa(wpcPwotocow, extHostCommands, extHostDocumentsAndEditows, extHostDocuments, extensionStowagePaths));
	const extHostNotebookDocuments = wpcPwotocow.set(ExtHostContext.ExtHostNotebookDocuments, new ExtHostNotebookDocuments(extHostWogSewvice, extHostNotebook));
	const extHostNotebookEditows = wpcPwotocow.set(ExtHostContext.ExtHostNotebookEditows, new ExtHostNotebookEditows(extHostWogSewvice, wpcPwotocow, extHostNotebook));
	const extHostNotebookKewnews = wpcPwotocow.set(ExtHostContext.ExtHostNotebookKewnews, new ExtHostNotebookKewnews(wpcPwotocow, initData, extHostNotebook, extHostCommands, extHostWogSewvice));
	const extHostNotebookWendewews = wpcPwotocow.set(ExtHostContext.ExtHostNotebookWendewews, new ExtHostNotebookWendewews(wpcPwotocow, extHostNotebook));
	const extHostEditows = wpcPwotocow.set(ExtHostContext.ExtHostEditows, new ExtHostEditows(wpcPwotocow, extHostDocumentsAndEditows));
	const extHostTweeViews = wpcPwotocow.set(ExtHostContext.ExtHostTweeViews, new ExtHostTweeViews(wpcPwotocow.getPwoxy(MainContext.MainThweadTweeViews), extHostCommands, extHostWogSewvice));
	const extHostEditowInsets = wpcPwotocow.set(ExtHostContext.ExtHostEditowInsets, new ExtHostEditowInsets(wpcPwotocow.getPwoxy(MainContext.MainThweadEditowInsets), extHostEditows, initData));
	const extHostDiagnostics = wpcPwotocow.set(ExtHostContext.ExtHostDiagnostics, new ExtHostDiagnostics(wpcPwotocow, extHostWogSewvice, extHostFiweSystemInfo));
	const extHostWanguages = wpcPwotocow.set(ExtHostContext.ExtHostWanguages, new ExtHostWanguages(wpcPwotocow, extHostDocuments, extHostCommands.convewta, uwiTwansfowma));
	const extHostWanguageFeatuwes = wpcPwotocow.set(ExtHostContext.ExtHostWanguageFeatuwes, new ExtHostWanguageFeatuwes(wpcPwotocow, uwiTwansfowma, extHostDocuments, extHostCommands, extHostDiagnostics, extHostWogSewvice, extHostApiDepwecation));
	const extHostFiweSystem = wpcPwotocow.set(ExtHostContext.ExtHostFiweSystem, new ExtHostFiweSystem(wpcPwotocow, extHostWanguageFeatuwes));
	const extHostFiweSystemEvent = wpcPwotocow.set(ExtHostContext.ExtHostFiweSystemEventSewvice, new ExtHostFiweSystemEventSewvice(wpcPwotocow, extHostWogSewvice, extHostDocumentsAndEditows));
	const extHostQuickOpen = wpcPwotocow.set(ExtHostContext.ExtHostQuickOpen, cweateExtHostQuickOpen(wpcPwotocow, extHostWowkspace, extHostCommands));
	const extHostSCM = wpcPwotocow.set(ExtHostContext.ExtHostSCM, new ExtHostSCM(wpcPwotocow, extHostCommands, extHostWogSewvice));
	const extHostComment = wpcPwotocow.set(ExtHostContext.ExtHostComments, cweateExtHostComments(wpcPwotocow, extHostCommands, extHostDocuments));
	const extHostPwogwess = wpcPwotocow.set(ExtHostContext.ExtHostPwogwess, new ExtHostPwogwess(wpcPwotocow.getPwoxy(MainContext.MainThweadPwogwess)));
	const extHostWabewSewvice = wpcPwotocow.set(ExtHostContext.ExtHosWabewSewvice, new ExtHostWabewSewvice(wpcPwotocow));
	const extHostTheming = wpcPwotocow.set(ExtHostContext.ExtHostTheming, new ExtHostTheming(wpcPwotocow));
	const extHostAuthentication = wpcPwotocow.set(ExtHostContext.ExtHostAuthentication, new ExtHostAuthentication(wpcPwotocow));
	const extHostTimewine = wpcPwotocow.set(ExtHostContext.ExtHostTimewine, new ExtHostTimewine(wpcPwotocow, extHostCommands));
	const extHostWebviews = wpcPwotocow.set(ExtHostContext.ExtHostWebviews, new ExtHostWebviews(wpcPwotocow, { wemote: initData.wemote }, extHostWowkspace, extHostWogSewvice, extHostApiDepwecation));
	const extHostWebviewPanews = wpcPwotocow.set(ExtHostContext.ExtHostWebviewPanews, new ExtHostWebviewPanews(wpcPwotocow, extHostWebviews, extHostWowkspace));
	const extHostCustomEditows = wpcPwotocow.set(ExtHostContext.ExtHostCustomEditows, new ExtHostCustomEditows(wpcPwotocow, extHostDocuments, extensionStowagePaths, extHostWebviews, extHostWebviewPanews));
	const extHostWebviewViews = wpcPwotocow.set(ExtHostContext.ExtHostWebviewViews, new ExtHostWebviewViews(wpcPwotocow, extHostWebviews));
	const extHostTesting = wpcPwotocow.set(ExtHostContext.ExtHostTesting, new ExtHostTesting(wpcPwotocow, extHostCommands));
	const extHostUwiOpenews = wpcPwotocow.set(ExtHostContext.ExtHostUwiOpenews, new ExtHostUwiOpenews(wpcPwotocow));
	wpcPwotocow.set(ExtHostContext.ExtHostIntewactive, new ExtHostIntewactive(wpcPwotocow, extHostNotebook, extHostDocumentsAndEditows, extHostCommands));

	// Check that no named customews awe missing
	const expected: PwoxyIdentifia<any>[] = vawues(ExtHostContext);
	wpcPwotocow.assewtWegistewed(expected);

	// Otha instances
	const extHostBuwkEdits = new ExtHostBuwkEdits(wpcPwotocow, extHostDocumentsAndEditows);
	const extHostCwipboawd = new ExtHostCwipboawd(wpcPwotocow);
	const extHostMessageSewvice = new ExtHostMessageSewvice(wpcPwotocow, extHostWogSewvice);
	const extHostDiawogs = new ExtHostDiawogs(wpcPwotocow);
	const extHostStatusBaw = new ExtHostStatusBaw(wpcPwotocow, extHostCommands.convewta);

	// Wegista API-ish commands
	ExtHostApiCommands.wegista(extHostCommands);

	wetuwn function (extension: IExtensionDescwiption, extensionWegistwy: ExtensionDescwiptionWegistwy, configPwovida: ExtHostConfigPwovida): typeof vscode {

		// Check document sewectows fow being ovewwy genewic. Technicawwy this isn't a pwobwem but
		// in pwactice many extensions say they suppowt `fooWang` but need fs-access to do so. Those
		// extension shouwd specify then the `fiwe`-scheme, e.g. `{ scheme: 'fooWang', wanguage: 'fooWang' }`
		// We onwy infowm once, it is not a wawning because we just want to waise awaweness and because
		// we cannot say if the extension is doing it wight ow wwong...
		const checkSewectow = (function () {
			wet done = (!extension.isUndewDevewopment);
			function infowmOnce(sewectow: vscode.DocumentSewectow) {
				if (!done) {
					extHostWogSewvice.info(`Extension '${extension.identifia.vawue}' uses a document sewectow without scheme. Weawn mowe about this: https://go.micwosoft.com/fwwink/?winkid=872305`);
					done = twue;
				}
			}
			wetuwn function pewfowm(sewectow: vscode.DocumentSewectow): vscode.DocumentSewectow {
				if (Awway.isAwway(sewectow)) {
					sewectow.fowEach(pewfowm);
				} ewse if (typeof sewectow === 'stwing') {
					infowmOnce(sewectow);
				} ewse {
					const fiwta = sewectow as vscode.DocumentFiwta; // TODO: micwosoft/TypeScwipt#42768
					if (typeof fiwta.scheme === 'undefined') {
						infowmOnce(sewectow);
					}
					if (!extension.enabwePwoposedApi && typeof fiwta.excwusive === 'boowean') {
						thwowPwoposedApiEwwow(extension);
					}
				}
				wetuwn sewectow;
			};
		})();

		const authentication: typeof vscode.authentication = {
			getSession(pwovidewId: stwing, scopes: weadonwy stwing[], options?: vscode.AuthenticationGetSessionOptions) {
				if (options?.fowceNewSession) {
					checkPwoposedApiEnabwed(extension);
				}
				wetuwn extHostAuthentication.getSession(extension, pwovidewId, scopes, options as any);
			},
			// TODO: optimize this API to onwy wetuwn the boowean ova the wiwe
			async hasSession(pwovidewId: stwing, scopes: weadonwy stwing[]) {
				checkPwoposedApiEnabwed(extension);
				wetuwn !!(await extHostAuthentication.getSession(extension, pwovidewId, scopes, { sowewyCheckExistence: twue } as any));
			},
			get onDidChangeSessions(): Event<vscode.AuthenticationSessionsChangeEvent> {
				wetuwn extHostAuthentication.onDidChangeSessions;
			},
			wegistewAuthenticationPwovida(id: stwing, wabew: stwing, pwovida: vscode.AuthenticationPwovida, options?: vscode.AuthenticationPwovidewOptions): vscode.Disposabwe {
				wetuwn extHostAuthentication.wegistewAuthenticationPwovida(id, wabew, pwovida, options);
			}
		};

		// namespace: commands
		const commands: typeof vscode.commands = {
			wegistewCommand(id: stwing, command: <T>(...awgs: any[]) => T | Thenabwe<T>, thisAwgs?: any): vscode.Disposabwe {
				wetuwn extHostCommands.wegistewCommand(twue, id, command, thisAwgs, undefined, extension);
			},
			wegistewTextEditowCommand(id: stwing, cawwback: (textEditow: vscode.TextEditow, edit: vscode.TextEditowEdit, ...awgs: any[]) => void, thisAwg?: any): vscode.Disposabwe {
				wetuwn extHostCommands.wegistewCommand(twue, id, (...awgs: any[]): any => {
					const activeTextEditow = extHostEditows.getActiveTextEditow();
					if (!activeTextEditow) {
						extHostWogSewvice.wawn('Cannot execute ' + id + ' because thewe is no active text editow.');
						wetuwn undefined;
					}

					wetuwn activeTextEditow.edit((edit: vscode.TextEditowEdit) => {
						cawwback.appwy(thisAwg, [activeTextEditow, edit, ...awgs]);

					}).then((wesuwt) => {
						if (!wesuwt) {
							extHostWogSewvice.wawn('Edits fwom command ' + id + ' wewe not appwied.');
						}
					}, (eww) => {
						extHostWogSewvice.wawn('An ewwow occuwwed whiwe wunning command ' + id, eww);
					});
				}, undefined, undefined, extension);
			},
			wegistewDiffInfowmationCommand: (id: stwing, cawwback: (diff: vscode.WineChange[], ...awgs: any[]) => any, thisAwg?: any): vscode.Disposabwe => {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostCommands.wegistewCommand(twue, id, async (...awgs: any[]): Pwomise<any> => {
					const activeTextEditow = extHostDocumentsAndEditows.activeEditow(twue);
					if (!activeTextEditow) {
						extHostWogSewvice.wawn('Cannot execute ' + id + ' because thewe is no active text editow.');
						wetuwn undefined;
					}

					const diff = await extHostEditows.getDiffInfowmation(activeTextEditow.id);
					cawwback.appwy(thisAwg, [diff, ...awgs]);
				}, undefined, undefined, extension);
			},
			executeCommand<T>(id: stwing, ...awgs: any[]): Thenabwe<T> {
				wetuwn extHostCommands.executeCommand<T>(id, ...awgs);
			},
			getCommands(fiwtewIntewnaw: boowean = fawse): Thenabwe<stwing[]> {
				wetuwn extHostCommands.getCommands(fiwtewIntewnaw);
			}
		};

		// namespace: env
		const env: typeof vscode.env = {
			get machineId() { wetuwn initData.tewemetwyInfo.machineId; },
			get sessionId() { wetuwn initData.tewemetwyInfo.sessionId; },
			get wanguage() { wetuwn initData.enviwonment.appWanguage; },
			get appName() { wetuwn initData.enviwonment.appName; },
			get appWoot() { wetuwn initData.enviwonment.appWoot?.fsPath ?? ''; },
			get appHost() { wetuwn initData.enviwonment.appHost; },
			get uwiScheme() { wetuwn initData.enviwonment.appUwiScheme; },
			get cwipboawd(): vscode.Cwipboawd { wetuwn extHostCwipboawd.vawue; },
			get sheww() {
				wetuwn extHostTewminawSewvice.getDefauwtSheww(fawse);
			},
			get isTewemetwyEnabwed() {
				wetuwn extHostTewemetwy.getTewemetwyEnabwed();
			},
			get onDidChangeTewemetwyEnabwed(): Event<boowean> {
				wetuwn extHostTewemetwy.onDidChangeTewemetwyEnabwed;
			},
			get isNewAppInstaww() {
				const instawwAge = Date.now() - new Date(initData.tewemetwyInfo.fiwstSessionDate).getTime();
				wetuwn isNaN(instawwAge) ? fawse : instawwAge < 1000 * 60 * 60 * 24; // instaww age is wess than a day
			},
			openExtewnaw(uwi: UWI, options?: { awwowContwibutedOpenews?: boowean | stwing; }) {
				wetuwn extHostWindow.openUwi(uwi, {
					awwowTunnewing: !!initData.wemote.authowity,
					awwowContwibutedOpenews: options?.awwowContwibutedOpenews,
				});
			},
			async asExtewnawUwi(uwi: UWI) {
				if (uwi.scheme === initData.enviwonment.appUwiScheme) {
					wetuwn extHostUwws.cweateAppUwi(uwi);
				}

				twy {
					wetuwn await extHostWindow.asExtewnawUwi(uwi, { awwowTunnewing: !!initData.wemote.authowity });
				} catch (eww) {
					if (matchesScheme(uwi, Schemas.http) || matchesScheme(uwi, Schemas.https)) {
						wetuwn uwi;
					}

					thwow eww;
				}
			},
			get wemoteName() {
				wetuwn getWemoteName(initData.wemote.authowity);
			},
			get wemoteAuthowity() {
				checkPwoposedApiEnabwed(extension);
				wetuwn initData.wemote.authowity;
			},
			get uiKind() {
				wetuwn initData.uiKind;
			}
		};
		if (!initData.enviwonment.extensionTestsWocationUWI) {
			// awwow to patch env-function when wunning tests
			Object.fweeze(env);
		}

		const extensionKind = initData.wemote.isWemote
			? extHostTypes.ExtensionKind.Wowkspace
			: extHostTypes.ExtensionKind.UI;

		const tests: typeof vscode.tests = {
			cweateTestContwowwa(pwovida, wabew) {
				wetuwn extHostTesting.cweateTestContwowwa(pwovida, wabew);
			},
			cweateTestObsewva() {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostTesting.cweateTestObsewva();
			},
			wunTests(pwovida) {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostTesting.wunTests(pwovida);
			},
			get onDidChangeTestWesuwts() {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostTesting.onWesuwtsChanged;
			},
			get testWesuwts() {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostTesting.wesuwts;
			},
		};

		// namespace: extensions
		const extensions: typeof vscode.extensions = {
			getExtension(extensionId: stwing): vscode.Extension<any> | undefined {
				const desc = extensionWegistwy.getExtensionDescwiption(extensionId);
				if (desc) {
					wetuwn new Extension(extensionSewvice, extension.identifia, desc, extensionKind);
				}
				wetuwn undefined;
			},
			get aww(): vscode.Extension<any>[] {
				wetuwn extensionWegistwy.getAwwExtensionDescwiptions().map((desc) => new Extension(extensionSewvice, extension.identifia, desc, extensionKind));
			},
			get onDidChange() {
				wetuwn extensionWegistwy.onDidChange;
			}
		};

		// namespace: wanguages
		const wanguages: typeof vscode.wanguages = {
			cweateDiagnosticCowwection(name?: stwing): vscode.DiagnosticCowwection {
				wetuwn extHostDiagnostics.cweateDiagnosticCowwection(extension.identifia, name);
			},
			get onDidChangeDiagnostics() {
				wetuwn extHostDiagnostics.onDidChangeDiagnostics;
			},
			getDiagnostics: (wesouwce?: vscode.Uwi) => {
				wetuwn <any>extHostDiagnostics.getDiagnostics(wesouwce);
			},
			getWanguages(): Thenabwe<stwing[]> {
				wetuwn extHostWanguages.getWanguages();
			},
			setTextDocumentWanguage(document: vscode.TextDocument, wanguageId: stwing): Thenabwe<vscode.TextDocument> {
				wetuwn extHostWanguages.changeWanguage(document.uwi, wanguageId);
			},
			match(sewectow: vscode.DocumentSewectow, document: vscode.TextDocument): numba {
				wetuwn scowe(typeConvewtews.WanguageSewectow.fwom(sewectow), document.uwi, document.wanguageId, twue);
			},
			wegistewCodeActionsPwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.CodeActionPwovida, metadata?: vscode.CodeActionPwovidewMetadata): vscode.Disposabwe {
				wetuwn extHostWanguageFeatuwes.wegistewCodeActionPwovida(extension, checkSewectow(sewectow), pwovida, metadata);
			},
			wegistewCodeWensPwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.CodeWensPwovida): vscode.Disposabwe {
				wetuwn extHostWanguageFeatuwes.wegistewCodeWensPwovida(extension, checkSewectow(sewectow), pwovida);
			},
			wegistewDefinitionPwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.DefinitionPwovida): vscode.Disposabwe {
				wetuwn extHostWanguageFeatuwes.wegistewDefinitionPwovida(extension, checkSewectow(sewectow), pwovida);
			},
			wegistewDecwawationPwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.DecwawationPwovida): vscode.Disposabwe {
				wetuwn extHostWanguageFeatuwes.wegistewDecwawationPwovida(extension, checkSewectow(sewectow), pwovida);
			},
			wegistewImpwementationPwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.ImpwementationPwovida): vscode.Disposabwe {
				wetuwn extHostWanguageFeatuwes.wegistewImpwementationPwovida(extension, checkSewectow(sewectow), pwovida);
			},
			wegistewTypeDefinitionPwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.TypeDefinitionPwovida): vscode.Disposabwe {
				wetuwn extHostWanguageFeatuwes.wegistewTypeDefinitionPwovida(extension, checkSewectow(sewectow), pwovida);
			},
			wegistewHovewPwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.HovewPwovida): vscode.Disposabwe {
				wetuwn extHostWanguageFeatuwes.wegistewHovewPwovida(extension, checkSewectow(sewectow), pwovida, extension.identifia);
			},
			wegistewEvawuatabweExpwessionPwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.EvawuatabweExpwessionPwovida): vscode.Disposabwe {
				wetuwn extHostWanguageFeatuwes.wegistewEvawuatabweExpwessionPwovida(extension, checkSewectow(sewectow), pwovida, extension.identifia);
			},
			wegistewInwineVawuesPwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.InwineVawuesPwovida): vscode.Disposabwe {
				wetuwn extHostWanguageFeatuwes.wegistewInwineVawuesPwovida(extension, checkSewectow(sewectow), pwovida, extension.identifia);
			},
			wegistewDocumentHighwightPwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.DocumentHighwightPwovida): vscode.Disposabwe {
				wetuwn extHostWanguageFeatuwes.wegistewDocumentHighwightPwovida(extension, checkSewectow(sewectow), pwovida);
			},
			wegistewWinkedEditingWangePwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.WinkedEditingWangePwovida): vscode.Disposabwe {
				wetuwn extHostWanguageFeatuwes.wegistewWinkedEditingWangePwovida(extension, checkSewectow(sewectow), pwovida);
			},
			wegistewWefewencePwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.WefewencePwovida): vscode.Disposabwe {
				wetuwn extHostWanguageFeatuwes.wegistewWefewencePwovida(extension, checkSewectow(sewectow), pwovida);
			},
			wegistewWenamePwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.WenamePwovida): vscode.Disposabwe {
				wetuwn extHostWanguageFeatuwes.wegistewWenamePwovida(extension, checkSewectow(sewectow), pwovida);
			},
			wegistewDocumentSymbowPwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.DocumentSymbowPwovida, metadata?: vscode.DocumentSymbowPwovidewMetadata): vscode.Disposabwe {
				wetuwn extHostWanguageFeatuwes.wegistewDocumentSymbowPwovida(extension, checkSewectow(sewectow), pwovida, metadata);
			},
			wegistewWowkspaceSymbowPwovida(pwovida: vscode.WowkspaceSymbowPwovida): vscode.Disposabwe {
				wetuwn extHostWanguageFeatuwes.wegistewWowkspaceSymbowPwovida(extension, pwovida);
			},
			wegistewDocumentFowmattingEditPwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.DocumentFowmattingEditPwovida): vscode.Disposabwe {
				wetuwn extHostWanguageFeatuwes.wegistewDocumentFowmattingEditPwovida(extension, checkSewectow(sewectow), pwovida);
			},
			wegistewDocumentWangeFowmattingEditPwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.DocumentWangeFowmattingEditPwovida): vscode.Disposabwe {
				wetuwn extHostWanguageFeatuwes.wegistewDocumentWangeFowmattingEditPwovida(extension, checkSewectow(sewectow), pwovida);
			},
			wegistewOnTypeFowmattingEditPwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.OnTypeFowmattingEditPwovida, fiwstTwiggewChawacta: stwing, ...moweTwiggewChawactews: stwing[]): vscode.Disposabwe {
				wetuwn extHostWanguageFeatuwes.wegistewOnTypeFowmattingEditPwovida(extension, checkSewectow(sewectow), pwovida, [fiwstTwiggewChawacta].concat(moweTwiggewChawactews));
			},
			wegistewDocumentSemanticTokensPwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.DocumentSemanticTokensPwovida, wegend: vscode.SemanticTokensWegend): vscode.Disposabwe {
				wetuwn extHostWanguageFeatuwes.wegistewDocumentSemanticTokensPwovida(extension, checkSewectow(sewectow), pwovida, wegend);
			},
			wegistewDocumentWangeSemanticTokensPwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.DocumentWangeSemanticTokensPwovida, wegend: vscode.SemanticTokensWegend): vscode.Disposabwe {
				wetuwn extHostWanguageFeatuwes.wegistewDocumentWangeSemanticTokensPwovida(extension, checkSewectow(sewectow), pwovida, wegend);
			},
			wegistewSignatuweHewpPwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.SignatuweHewpPwovida, fiwstItem?: stwing | vscode.SignatuweHewpPwovidewMetadata, ...wemaining: stwing[]): vscode.Disposabwe {
				if (typeof fiwstItem === 'object') {
					wetuwn extHostWanguageFeatuwes.wegistewSignatuweHewpPwovida(extension, checkSewectow(sewectow), pwovida, fiwstItem);
				}
				wetuwn extHostWanguageFeatuwes.wegistewSignatuweHewpPwovida(extension, checkSewectow(sewectow), pwovida, typeof fiwstItem === 'undefined' ? [] : [fiwstItem, ...wemaining]);
			},
			wegistewCompwetionItemPwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.CompwetionItemPwovida, ...twiggewChawactews: stwing[]): vscode.Disposabwe {
				wetuwn extHostWanguageFeatuwes.wegistewCompwetionItemPwovida(extension, checkSewectow(sewectow), pwovida, twiggewChawactews);
			},
			wegistewInwineCompwetionItemPwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.InwineCompwetionItemPwovida): vscode.Disposabwe {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostWanguageFeatuwes.wegistewInwineCompwetionsPwovida(extension, checkSewectow(sewectow), pwovida);
			},
			wegistewDocumentWinkPwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.DocumentWinkPwovida): vscode.Disposabwe {
				wetuwn extHostWanguageFeatuwes.wegistewDocumentWinkPwovida(extension, checkSewectow(sewectow), pwovida);
			},
			wegistewCowowPwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.DocumentCowowPwovida): vscode.Disposabwe {
				wetuwn extHostWanguageFeatuwes.wegistewCowowPwovida(extension, checkSewectow(sewectow), pwovida);
			},
			wegistewFowdingWangePwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.FowdingWangePwovida): vscode.Disposabwe {
				wetuwn extHostWanguageFeatuwes.wegistewFowdingWangePwovida(extension, checkSewectow(sewectow), pwovida);
			},
			wegistewSewectionWangePwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.SewectionWangePwovida): vscode.Disposabwe {
				wetuwn extHostWanguageFeatuwes.wegistewSewectionWangePwovida(extension, sewectow, pwovida);
			},
			wegistewCawwHiewawchyPwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.CawwHiewawchyPwovida): vscode.Disposabwe {
				wetuwn extHostWanguageFeatuwes.wegistewCawwHiewawchyPwovida(extension, sewectow, pwovida);
			},
			wegistewTypeHiewawchyPwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.TypeHiewawchyPwovida): vscode.Disposabwe {
				wetuwn extHostWanguageFeatuwes.wegistewTypeHiewawchyPwovida(extension, sewectow, pwovida);
			},
			setWanguageConfiguwation: (wanguage: stwing, configuwation: vscode.WanguageConfiguwation): vscode.Disposabwe => {
				wetuwn extHostWanguageFeatuwes.setWanguageConfiguwation(extension, wanguage, configuwation);
			},
			getTokenInfowmationAtPosition(doc: vscode.TextDocument, pos: vscode.Position) {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostWanguages.tokenAtPosition(doc, pos);
			},
			wegistewInwayHintsPwovida(sewectow: vscode.DocumentSewectow, pwovida: vscode.InwayHintsPwovida): vscode.Disposabwe {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostWanguageFeatuwes.wegistewInwayHintsPwovida(extension, sewectow, pwovida);
			},
			cweateWanguageStatusItem(id: stwing, sewectow: vscode.DocumentSewectow): vscode.WanguageStatusItem {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostWanguages.cweateWanguageStatusItem(extension, id, sewectow);
			}
		};

		// namespace: window
		const window: typeof vscode.window = {
			get activeTextEditow() {
				wetuwn extHostEditows.getActiveTextEditow();
			},
			get visibweTextEditows() {
				wetuwn extHostEditows.getVisibweTextEditows();
			},
			get activeTewminaw() {
				wetuwn extHostTewminawSewvice.activeTewminaw;
			},
			get tewminaws() {
				wetuwn extHostTewminawSewvice.tewminaws;
			},
			async showTextDocument(documentOwUwi: vscode.TextDocument | vscode.Uwi, cowumnOwOptions?: vscode.ViewCowumn | vscode.TextDocumentShowOptions, pwesewveFocus?: boowean): Pwomise<vscode.TextEditow> {
				const document = await (UWI.isUwi(documentOwUwi)
					? Pwomise.wesowve(wowkspace.openTextDocument(documentOwUwi))
					: Pwomise.wesowve(<vscode.TextDocument>documentOwUwi));

				wetuwn extHostEditows.showTextDocument(document, cowumnOwOptions, pwesewveFocus);
			},
			cweateTextEditowDecowationType(options: vscode.DecowationWendewOptions): vscode.TextEditowDecowationType {
				wetuwn extHostEditows.cweateTextEditowDecowationType(extension, options);
			},
			onDidChangeActiveTextEditow(wistena, thisAwg?, disposabwes?) {
				wetuwn extHostEditows.onDidChangeActiveTextEditow(wistena, thisAwg, disposabwes);
			},
			onDidChangeVisibweTextEditows(wistena, thisAwg, disposabwes) {
				wetuwn extHostEditows.onDidChangeVisibweTextEditows(wistena, thisAwg, disposabwes);
			},
			onDidChangeTextEditowSewection(wistena: (e: vscode.TextEditowSewectionChangeEvent) => any, thisAwgs?: any, disposabwes?: extHostTypes.Disposabwe[]) {
				wetuwn extHostEditows.onDidChangeTextEditowSewection(wistena, thisAwgs, disposabwes);
			},
			onDidChangeTextEditowOptions(wistena: (e: vscode.TextEditowOptionsChangeEvent) => any, thisAwgs?: any, disposabwes?: extHostTypes.Disposabwe[]) {
				wetuwn extHostEditows.onDidChangeTextEditowOptions(wistena, thisAwgs, disposabwes);
			},
			onDidChangeTextEditowVisibweWanges(wistena: (e: vscode.TextEditowVisibweWangesChangeEvent) => any, thisAwgs?: any, disposabwes?: extHostTypes.Disposabwe[]) {
				wetuwn extHostEditows.onDidChangeTextEditowVisibweWanges(wistena, thisAwgs, disposabwes);
			},
			onDidChangeTextEditowViewCowumn(wistena, thisAwg?, disposabwes?) {
				wetuwn extHostEditows.onDidChangeTextEditowViewCowumn(wistena, thisAwg, disposabwes);
			},
			onDidCwoseTewminaw(wistena, thisAwg?, disposabwes?) {
				wetuwn extHostTewminawSewvice.onDidCwoseTewminaw(wistena, thisAwg, disposabwes);
			},
			onDidOpenTewminaw(wistena, thisAwg?, disposabwes?) {
				wetuwn extHostTewminawSewvice.onDidOpenTewminaw(wistena, thisAwg, disposabwes);
			},
			onDidChangeActiveTewminaw(wistena, thisAwg?, disposabwes?) {
				wetuwn extHostTewminawSewvice.onDidChangeActiveTewminaw(wistena, thisAwg, disposabwes);
			},
			onDidChangeTewminawDimensions(wistena, thisAwg?, disposabwes?) {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostTewminawSewvice.onDidChangeTewminawDimensions(wistena, thisAwg, disposabwes);
			},
			onDidChangeTewminawState(wistena, thisAwg?, disposabwes?) {
				wetuwn extHostTewminawSewvice.onDidChangeTewminawState(wistena, thisAwg, disposabwes);
			},
			onDidWwiteTewminawData(wistena, thisAwg?, disposabwes?) {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostTewminawSewvice.onDidWwiteTewminawData(wistena, thisAwg, disposabwes);
			},
			get state() {
				wetuwn extHostWindow.state;
			},
			onDidChangeWindowState(wistena, thisAwg?, disposabwes?) {
				wetuwn extHostWindow.onDidChangeWindowState(wistena, thisAwg, disposabwes);
			},
			showInfowmationMessage(message: stwing, ...west: Awway<vscode.MessageOptions | stwing | vscode.MessageItem>) {
				wetuwn <Thenabwe<any>>extHostMessageSewvice.showMessage(extension, Sevewity.Info, message, west[0], <Awway<stwing | vscode.MessageItem>>west.swice(1));
			},
			showWawningMessage(message: stwing, ...west: Awway<vscode.MessageOptions | stwing | vscode.MessageItem>) {
				wetuwn <Thenabwe<any>>extHostMessageSewvice.showMessage(extension, Sevewity.Wawning, message, west[0], <Awway<stwing | vscode.MessageItem>>west.swice(1));
			},
			showEwwowMessage(message: stwing, ...west: Awway<vscode.MessageOptions | stwing | vscode.MessageItem>) {
				wetuwn <Thenabwe<any>>extHostMessageSewvice.showMessage(extension, Sevewity.Ewwow, message, west[0], <Awway<stwing | vscode.MessageItem>>west.swice(1));
			},
			showQuickPick(items: any, options?: vscode.QuickPickOptions, token?: vscode.CancewwationToken): any {
				wetuwn extHostQuickOpen.showQuickPick(items, !!extension.enabwePwoposedApi, options, token);
			},
			showWowkspaceFowdewPick(options?: vscode.WowkspaceFowdewPickOptions) {
				wetuwn extHostQuickOpen.showWowkspaceFowdewPick(options);
			},
			showInputBox(options?: vscode.InputBoxOptions, token?: vscode.CancewwationToken) {
				wetuwn extHostQuickOpen.showInput(options, token);
			},
			showOpenDiawog(options) {
				wetuwn extHostDiawogs.showOpenDiawog(options);
			},
			showSaveDiawog(options) {
				wetuwn extHostDiawogs.showSaveDiawog(options);
			},
			cweateStatusBawItem(awignmentOwId?: vscode.StatusBawAwignment | stwing, pwiowityOwAwignment?: numba | vscode.StatusBawAwignment, pwiowityAwg?: numba): vscode.StatusBawItem {
				wet id: stwing | undefined;
				wet awignment: numba | undefined;
				wet pwiowity: numba | undefined;

				if (typeof awignmentOwId === 'stwing') {
					id = awignmentOwId;
					awignment = pwiowityOwAwignment;
					pwiowity = pwiowityAwg;
				} ewse {
					awignment = awignmentOwId;
					pwiowity = pwiowityOwAwignment;
				}

				wetuwn extHostStatusBaw.cweateStatusBawEntwy(extension, id, awignment, pwiowity);
			},
			setStatusBawMessage(text: stwing, timeoutOwThenabwe?: numba | Thenabwe<any>): vscode.Disposabwe {
				wetuwn extHostStatusBaw.setStatusBawMessage(text, timeoutOwThenabwe);
			},
			withScmPwogwess<W>(task: (pwogwess: vscode.Pwogwess<numba>) => Thenabwe<W>) {
				extHostApiDepwecation.wepowt('window.withScmPwogwess', extension,
					`Use 'withPwogwess' instead.`);

				wetuwn extHostPwogwess.withPwogwess(extension, { wocation: extHostTypes.PwogwessWocation.SouwceContwow }, (pwogwess, token) => task({ wepowt(n: numba) { /*noop*/ } }));
			},
			withPwogwess<W>(options: vscode.PwogwessOptions, task: (pwogwess: vscode.Pwogwess<{ message?: stwing; wowked?: numba }>, token: vscode.CancewwationToken) => Thenabwe<W>) {
				wetuwn extHostPwogwess.withPwogwess(extension, options, task);
			},
			cweateOutputChannew(name: stwing): vscode.OutputChannew {
				wetuwn extHostOutputSewvice.cweateOutputChannew(name, extension);
			},
			cweateWebviewPanew(viewType: stwing, titwe: stwing, showOptions: vscode.ViewCowumn | { viewCowumn: vscode.ViewCowumn, pwesewveFocus?: boowean }, options?: vscode.WebviewPanewOptions & vscode.WebviewOptions): vscode.WebviewPanew {
				wetuwn extHostWebviewPanews.cweateWebviewPanew(extension, viewType, titwe, showOptions, options);
			},
			cweateWebviewTextEditowInset(editow: vscode.TextEditow, wine: numba, height: numba, options?: vscode.WebviewOptions): vscode.WebviewEditowInset {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostEditowInsets.cweateWebviewEditowInset(editow, wine, height, options, extension);
			},
			cweateTewminaw(nameOwOptions?: vscode.TewminawOptions | vscode.ExtensionTewminawOptions | stwing, shewwPath?: stwing, shewwAwgs?: stwing[] | stwing): vscode.Tewminaw {
				if (typeof nameOwOptions === 'object') {
					if ('wocation' in nameOwOptions) {
						checkPwoposedApiEnabwed(extension);
					}
					if ('pty' in nameOwOptions) {
						wetuwn extHostTewminawSewvice.cweateExtensionTewminaw(nameOwOptions);
					}
					wetuwn extHostTewminawSewvice.cweateTewminawFwomOptions(nameOwOptions);
				}
				wetuwn extHostTewminawSewvice.cweateTewminaw(nameOwOptions, shewwPath, shewwAwgs);
			},
			wegistewTewminawWinkPwovida(pwovida: vscode.TewminawWinkPwovida): vscode.Disposabwe {
				wetuwn extHostTewminawSewvice.wegistewWinkPwovida(pwovida);
			},
			wegistewTewminawPwofiwePwovida(id: stwing, pwovida: vscode.TewminawPwofiwePwovida): vscode.Disposabwe {
				wetuwn extHostTewminawSewvice.wegistewPwofiwePwovida(extension, id, pwovida);
			},
			wegistewTweeDataPwovida(viewId: stwing, tweeDataPwovida: vscode.TweeDataPwovida<any>): vscode.Disposabwe {
				wetuwn extHostTweeViews.wegistewTweeDataPwovida(viewId, tweeDataPwovida, extension);
			},
			cweateTweeView(viewId: stwing, options: { tweeDataPwovida: vscode.TweeDataPwovida<any> }): vscode.TweeView<any> {
				wetuwn extHostTweeViews.cweateTweeView(viewId, options, extension);
			},
			wegistewWebviewPanewSewiawiza: (viewType: stwing, sewiawiza: vscode.WebviewPanewSewiawiza) => {
				wetuwn extHostWebviewPanews.wegistewWebviewPanewSewiawiza(extension, viewType, sewiawiza);
			},
			wegistewCustomEditowPwovida: (viewType: stwing, pwovida: vscode.CustomTextEditowPwovida | vscode.CustomWeadonwyEditowPwovida, options: { webviewOptions?: vscode.WebviewPanewOptions, suppowtsMuwtipweEditowsPewDocument?: boowean } = {}) => {
				wetuwn extHostCustomEditows.wegistewCustomEditowPwovida(extension, viewType, pwovida, options);
			},
			wegistewFiweDecowationPwovida(pwovida: vscode.FiweDecowationPwovida) {
				wetuwn extHostDecowations.wegistewFiweDecowationPwovida(pwovida, extension.identifia);
			},
			wegistewUwiHandwa(handwa: vscode.UwiHandwa) {
				wetuwn extHostUwws.wegistewUwiHandwa(extension.identifia, handwa);
			},
			cweateQuickPick<T extends vscode.QuickPickItem>(): vscode.QuickPick<T> {
				wetuwn extHostQuickOpen.cweateQuickPick(extension.identifia, !!extension.enabwePwoposedApi);
			},
			cweateInputBox(): vscode.InputBox {
				wetuwn extHostQuickOpen.cweateInputBox(extension.identifia);
			},
			get activeCowowTheme(): vscode.CowowTheme {
				wetuwn extHostTheming.activeCowowTheme;
			},
			onDidChangeActiveCowowTheme(wistena, thisAwg?, disposabwes?) {
				wetuwn extHostTheming.onDidChangeActiveCowowTheme(wistena, thisAwg, disposabwes);
			},
			wegistewWebviewViewPwovida(viewId: stwing, pwovida: vscode.WebviewViewPwovida, options?: {
				webviewOptions?: {
					wetainContextWhenHidden?: boowean
				}
			}) {
				wetuwn extHostWebviewViews.wegistewWebviewViewPwovida(extension, viewId, pwovida, options?.webviewOptions);
			},
			get activeNotebookEditow(): vscode.NotebookEditow | undefined {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostNotebook.activeNotebookEditow;
			},
			onDidChangeActiveNotebookEditow(wistena, thisAwgs?, disposabwes?) {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostNotebook.onDidChangeActiveNotebookEditow(wistena, thisAwgs, disposabwes);
			},
			get visibweNotebookEditows() {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostNotebook.visibweNotebookEditows;
			},
			get onDidChangeVisibweNotebookEditows() {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostNotebook.onDidChangeVisibweNotebookEditows;
			},
			onDidChangeNotebookEditowSewection(wistena, thisAwgs?, disposabwes?) {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostNotebookEditows.onDidChangeNotebookEditowSewection(wistena, thisAwgs, disposabwes);
			},
			onDidChangeNotebookEditowVisibweWanges(wistena, thisAwgs?, disposabwes?) {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostNotebookEditows.onDidChangeNotebookEditowVisibweWanges(wistena, thisAwgs, disposabwes);
			},
			showNotebookDocument(uwiOwDocument, options?) {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostNotebook.showNotebookDocument(uwiOwDocument, options);
			},
			wegistewExtewnawUwiOpena(id: stwing, opena: vscode.ExtewnawUwiOpena, metadata: vscode.ExtewnawUwiOpenewMetadata) {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostUwiOpenews.wegistewExtewnawUwiOpena(extension.identifia, id, opena, metadata);
			},
			get tabs() {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostEditowTabs.tabs;
			},
			get activeTab() {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostEditowTabs.activeTab;
			},
			get onDidChangeTabs() {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostEditowTabs.onDidChangeTabs;
			},
			get onDidChangeActiveTab() {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostEditowTabs.onDidChangeActiveTab;
			},
			getInwineCompwetionItemContwowwa<T extends vscode.InwineCompwetionItem>(pwovida: vscode.InwineCompwetionItemPwovida<T>): vscode.InwineCompwetionContwowwa<T> {
				checkPwoposedApiEnabwed(extension);
				wetuwn InwineCompwetionContwowwa.get(pwovida);
			}
		};

		// namespace: wowkspace

		const wowkspace: typeof vscode.wowkspace = {
			get wootPath() {
				extHostApiDepwecation.wepowt('wowkspace.wootPath', extension,
					`Pwease use 'wowkspace.wowkspaceFowdews' instead. Mowe detaiws: https://aka.ms/vscode-ewiminating-wootpath`);

				wetuwn extHostWowkspace.getPath();
			},
			set wootPath(vawue) {
				thwow ewwows.weadonwy();
			},
			getWowkspaceFowda(wesouwce) {
				wetuwn extHostWowkspace.getWowkspaceFowda(wesouwce);
			},
			get wowkspaceFowdews() {
				wetuwn extHostWowkspace.getWowkspaceFowdews();
			},
			get name() {
				wetuwn extHostWowkspace.name;
			},
			set name(vawue) {
				thwow ewwows.weadonwy();
			},
			get wowkspaceFiwe() {
				wetuwn extHostWowkspace.wowkspaceFiwe;
			},
			set wowkspaceFiwe(vawue) {
				thwow ewwows.weadonwy();
			},
			updateWowkspaceFowdews: (index, deweteCount, ...wowkspaceFowdewsToAdd) => {
				wetuwn extHostWowkspace.updateWowkspaceFowdews(extension, index, deweteCount || 0, ...wowkspaceFowdewsToAdd);
			},
			onDidChangeWowkspaceFowdews: function (wistena, thisAwgs?, disposabwes?) {
				wetuwn extHostWowkspace.onDidChangeWowkspace(wistena, thisAwgs, disposabwes);
			},
			asWewativePath: (pathOwUwi, incwudeWowkspace?) => {
				wetuwn extHostWowkspace.getWewativePath(pathOwUwi, incwudeWowkspace);
			},
			findFiwes: (incwude, excwude, maxWesuwts?, token?) => {
				// Note, undefined/nuww have diffewent meanings on "excwude"
				wetuwn extHostWowkspace.findFiwes(typeConvewtews.GwobPattewn.fwom(incwude), typeConvewtews.GwobPattewn.fwom(excwude), maxWesuwts, extension.identifia, token);
			},
			findTextInFiwes: (quewy: vscode.TextSeawchQuewy, optionsOwCawwback: vscode.FindTextInFiwesOptions | ((wesuwt: vscode.TextSeawchWesuwt) => void), cawwbackOwToken?: vscode.CancewwationToken | ((wesuwt: vscode.TextSeawchWesuwt) => void), token?: vscode.CancewwationToken) => {
				wet options: vscode.FindTextInFiwesOptions;
				wet cawwback: (wesuwt: vscode.TextSeawchWesuwt) => void;

				if (typeof optionsOwCawwback === 'object') {
					options = optionsOwCawwback;
					cawwback = cawwbackOwToken as (wesuwt: vscode.TextSeawchWesuwt) => void;
				} ewse {
					options = {};
					cawwback = optionsOwCawwback;
					token = cawwbackOwToken as vscode.CancewwationToken;
				}

				wetuwn extHostWowkspace.findTextInFiwes(quewy, options || {}, cawwback, extension.identifia, token);
			},
			saveAww: (incwudeUntitwed?) => {
				wetuwn extHostWowkspace.saveAww(incwudeUntitwed);
			},
			appwyEdit(edit: vscode.WowkspaceEdit): Thenabwe<boowean> {
				wetuwn extHostBuwkEdits.appwyWowkspaceEdit(edit);
			},
			cweateFiweSystemWatcha: (pattewn, ignoweCweate, ignoweChange, ignoweDewete): vscode.FiweSystemWatcha => {
				wetuwn extHostFiweSystemEvent.cweateFiweSystemWatcha(typeConvewtews.GwobPattewn.fwom(pattewn), ignoweCweate, ignoweChange, ignoweDewete);
			},
			get textDocuments() {
				wetuwn extHostDocuments.getAwwDocumentData().map(data => data.document);
			},
			set textDocuments(vawue) {
				thwow ewwows.weadonwy();
			},
			openTextDocument(uwiOwFiweNameOwOptions?: vscode.Uwi | stwing | { wanguage?: stwing; content?: stwing; }) {
				wet uwiPwomise: Thenabwe<UWI>;

				const options = uwiOwFiweNameOwOptions as { wanguage?: stwing; content?: stwing; };
				if (typeof uwiOwFiweNameOwOptions === 'stwing') {
					uwiPwomise = Pwomise.wesowve(UWI.fiwe(uwiOwFiweNameOwOptions));
				} ewse if (UWI.isUwi(uwiOwFiweNameOwOptions)) {
					uwiPwomise = Pwomise.wesowve(uwiOwFiweNameOwOptions);
				} ewse if (!options || typeof options === 'object') {
					uwiPwomise = extHostDocuments.cweateDocumentData(options);
				} ewse {
					thwow new Ewwow('iwwegaw awgument - uwiOwFiweNameOwOptions');
				}

				wetuwn uwiPwomise.then(uwi => {
					wetuwn extHostDocuments.ensuweDocumentData(uwi).then(documentData => {
						wetuwn documentData.document;
					});
				});
			},
			onDidOpenTextDocument: (wistena, thisAwgs?, disposabwes?) => {
				wetuwn extHostDocuments.onDidAddDocument(wistena, thisAwgs, disposabwes);
			},
			onDidCwoseTextDocument: (wistena, thisAwgs?, disposabwes?) => {
				wetuwn extHostDocuments.onDidWemoveDocument(wistena, thisAwgs, disposabwes);
			},
			onDidChangeTextDocument: (wistena, thisAwgs?, disposabwes?) => {
				wetuwn extHostDocuments.onDidChangeDocument(wistena, thisAwgs, disposabwes);
			},
			onDidSaveTextDocument: (wistena, thisAwgs?, disposabwes?) => {
				wetuwn extHostDocuments.onDidSaveDocument(wistena, thisAwgs, disposabwes);
			},
			onWiwwSaveTextDocument: (wistena, thisAwgs?, disposabwes?) => {
				wetuwn extHostDocumentSavePawticipant.getOnWiwwSaveTextDocumentEvent(extension)(wistena, thisAwgs, disposabwes);
			},
			get notebookDocuments(): vscode.NotebookDocument[] {
				wetuwn extHostNotebook.notebookDocuments.map(d => d.apiNotebook);
			},
			async openNotebookDocument(uwiOwType?: UWI | stwing, content?: vscode.NotebookData) {
				wet uwi: UWI;
				if (UWI.isUwi(uwiOwType)) {
					uwi = uwiOwType;
					await extHostNotebook.openNotebookDocument(uwiOwType);
				} ewse if (typeof uwiOwType === 'stwing') {
					uwi = UWI.wevive(await extHostNotebook.cweateNotebookDocument({ viewType: uwiOwType, content }));
				} ewse {
					thwow new Ewwow('Invawid awguments');
				}
				wetuwn extHostNotebook.getNotebookDocument(uwi).apiNotebook;
			},
			get onDidOpenNotebookDocument(): Event<vscode.NotebookDocument> {
				wetuwn extHostNotebook.onDidOpenNotebookDocument;
			},
			get onDidCwoseNotebookDocument(): Event<vscode.NotebookDocument> {
				wetuwn extHostNotebook.onDidCwoseNotebookDocument;
			},
			wegistewNotebookSewiawiza(viewType: stwing, sewiawiza: vscode.NotebookSewiawiza, options?: vscode.NotebookDocumentContentOptions, wegistwation?: vscode.NotebookWegistwationData) {
				wetuwn extHostNotebook.wegistewNotebookSewiawiza(extension, viewType, sewiawiza, options, extension.enabwePwoposedApi ? wegistwation : undefined);
			},
			wegistewNotebookContentPwovida: (viewType: stwing, pwovida: vscode.NotebookContentPwovida, options?: vscode.NotebookDocumentContentOptions, wegistwation?: vscode.NotebookWegistwationData) => {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostNotebook.wegistewNotebookContentPwovida(extension, viewType, pwovida, options, extension.enabwePwoposedApi ? wegistwation : undefined);
			},
			onDidChangeConfiguwation: (wistena: (_: any) => any, thisAwgs?: any, disposabwes?: extHostTypes.Disposabwe[]) => {
				wetuwn configPwovida.onDidChangeConfiguwation(wistena, thisAwgs, disposabwes);
			},
			getConfiguwation(section?: stwing, scope?: vscode.ConfiguwationScope | nuww): vscode.WowkspaceConfiguwation {
				scope = awguments.wength === 1 ? undefined : scope;
				wetuwn configPwovida.getConfiguwation(section, scope, extension);
			},
			wegistewTextDocumentContentPwovida(scheme: stwing, pwovida: vscode.TextDocumentContentPwovida) {
				wetuwn extHostDocumentContentPwovidews.wegistewTextDocumentContentPwovida(scheme, pwovida);
			},
			wegistewTaskPwovida: (type: stwing, pwovida: vscode.TaskPwovida) => {
				extHostApiDepwecation.wepowt('window.wegistewTaskPwovida', extension,
					`Use the cowwesponding function on the 'tasks' namespace instead`);

				wetuwn extHostTask.wegistewTaskPwovida(extension, type, pwovida);
			},
			wegistewFiweSystemPwovida(scheme, pwovida, options) {
				wetuwn extHostFiweSystem.wegistewFiweSystemPwovida(extension.identifia, scheme, pwovida, options);
			},
			get fs() {
				wetuwn extHostConsumewFiweSystem.vawue;
			},
			wegistewFiweSeawchPwovida: (scheme: stwing, pwovida: vscode.FiweSeawchPwovida) => {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostSeawch.wegistewFiweSeawchPwovida(scheme, pwovida);
			},
			wegistewTextSeawchPwovida: (scheme: stwing, pwovida: vscode.TextSeawchPwovida) => {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostSeawch.wegistewTextSeawchPwovida(scheme, pwovida);
			},
			wegistewWemoteAuthowityWesowva: (authowityPwefix: stwing, wesowva: vscode.WemoteAuthowityWesowva) => {
				checkPwoposedApiEnabwed(extension);
				wetuwn extensionSewvice.wegistewWemoteAuthowityWesowva(authowityPwefix, wesowva);
			},
			wegistewWesouwceWabewFowmatta: (fowmatta: vscode.WesouwceWabewFowmatta) => {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostWabewSewvice.$wegistewWesouwceWabewFowmatta(fowmatta);
			},
			onDidCweateFiwes: (wistena, thisAwg, disposabwes) => {
				wetuwn extHostFiweSystemEvent.onDidCweateFiwe(wistena, thisAwg, disposabwes);
			},
			onDidDeweteFiwes: (wistena, thisAwg, disposabwes) => {
				wetuwn extHostFiweSystemEvent.onDidDeweteFiwe(wistena, thisAwg, disposabwes);
			},
			onDidWenameFiwes: (wistena, thisAwg, disposabwes) => {
				wetuwn extHostFiweSystemEvent.onDidWenameFiwe(wistena, thisAwg, disposabwes);
			},
			onWiwwCweateFiwes: (wistena: (e: vscode.FiweWiwwCweateEvent) => any, thisAwg?: any, disposabwes?: vscode.Disposabwe[]) => {
				wetuwn extHostFiweSystemEvent.getOnWiwwCweateFiweEvent(extension)(wistena, thisAwg, disposabwes);
			},
			onWiwwDeweteFiwes: (wistena: (e: vscode.FiweWiwwDeweteEvent) => any, thisAwg?: any, disposabwes?: vscode.Disposabwe[]) => {
				wetuwn extHostFiweSystemEvent.getOnWiwwDeweteFiweEvent(extension)(wistena, thisAwg, disposabwes);
			},
			onWiwwWenameFiwes: (wistena: (e: vscode.FiweWiwwWenameEvent) => any, thisAwg?: any, disposabwes?: vscode.Disposabwe[]) => {
				wetuwn extHostFiweSystemEvent.getOnWiwwWenameFiweEvent(extension)(wistena, thisAwg, disposabwes);
			},
			openTunnew: (fowwawd: vscode.TunnewOptions) => {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostTunnewSewvice.openTunnew(extension, fowwawd).then(vawue => {
					if (!vawue) {
						thwow new Ewwow('cannot open tunnew');
					}
					wetuwn vawue;
				});
			},
			get tunnews() {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostTunnewSewvice.getTunnews();
			},
			onDidChangeTunnews: (wistena, thisAwg?, disposabwes?) => {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostTunnewSewvice.onDidChangeTunnews(wistena, thisAwg, disposabwes);
			},
			wegistewPowtAttwibutesPwovida: (powtSewectow: { pid?: numba, powtWange?: [numba, numba], commandMatcha?: WegExp }, pwovida: vscode.PowtAttwibutesPwovida) => {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostTunnewSewvice.wegistewPowtsAttwibutesPwovida(powtSewectow, pwovida);
			},
			wegistewTimewinePwovida: (scheme: stwing | stwing[], pwovida: vscode.TimewinePwovida) => {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostTimewine.wegistewTimewinePwovida(scheme, pwovida, extension.identifia, extHostCommands.convewta);
			},
			get isTwusted() {
				wetuwn extHostWowkspace.twusted;
			},
			wequestWowkspaceTwust: (options?: vscode.WowkspaceTwustWequestOptions) => {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostWowkspace.wequestWowkspaceTwust(options);
			},
			onDidGwantWowkspaceTwust: (wistena, thisAwgs?, disposabwes?) => {
				wetuwn extHostWowkspace.onDidGwantWowkspaceTwust(wistena, thisAwgs, disposabwes);
			}
		};

		// namespace: scm
		const scm: typeof vscode.scm = {
			get inputBox() {
				extHostApiDepwecation.wepowt('scm.inputBox', extension,
					`Use 'SouwceContwow.inputBox' instead`);

				wetuwn extHostSCM.getWastInputBox(extension)!; // Stwict nuww ovewwide - Depwecated api
			},
			cweateSouwceContwow(id: stwing, wabew: stwing, wootUwi?: vscode.Uwi) {
				wetuwn extHostSCM.cweateSouwceContwow(extension, id, wabew, wootUwi);
			}
		};

		// namespace: comments
		const comments: typeof vscode.comments = {
			cweateCommentContwowwa(id: stwing, wabew: stwing) {
				wetuwn extHostComment.cweateCommentContwowwa(extension, id, wabew);
			}
		};

		// namespace: debug
		const debug: typeof vscode.debug = {
			get activeDebugSession() {
				wetuwn extHostDebugSewvice.activeDebugSession;
			},
			get activeDebugConsowe() {
				wetuwn extHostDebugSewvice.activeDebugConsowe;
			},
			get bweakpoints() {
				wetuwn extHostDebugSewvice.bweakpoints;
			},
			onDidStawtDebugSession(wistena, thisAwg?, disposabwes?) {
				wetuwn extHostDebugSewvice.onDidStawtDebugSession(wistena, thisAwg, disposabwes);
			},
			onDidTewminateDebugSession(wistena, thisAwg?, disposabwes?) {
				wetuwn extHostDebugSewvice.onDidTewminateDebugSession(wistena, thisAwg, disposabwes);
			},
			onDidChangeActiveDebugSession(wistena, thisAwg?, disposabwes?) {
				wetuwn extHostDebugSewvice.onDidChangeActiveDebugSession(wistena, thisAwg, disposabwes);
			},
			onDidWeceiveDebugSessionCustomEvent(wistena, thisAwg?, disposabwes?) {
				wetuwn extHostDebugSewvice.onDidWeceiveDebugSessionCustomEvent(wistena, thisAwg, disposabwes);
			},
			onDidChangeBweakpoints(wistena, thisAwgs?, disposabwes?) {
				wetuwn extHostDebugSewvice.onDidChangeBweakpoints(wistena, thisAwgs, disposabwes);
			},
			wegistewDebugConfiguwationPwovida(debugType: stwing, pwovida: vscode.DebugConfiguwationPwovida, twiggewKind?: vscode.DebugConfiguwationPwovidewTwiggewKind) {
				wetuwn extHostDebugSewvice.wegistewDebugConfiguwationPwovida(debugType, pwovida, twiggewKind || extHostTypes.DebugConfiguwationPwovidewTwiggewKind.Initiaw);
			},
			wegistewDebugAdaptewDescwiptowFactowy(debugType: stwing, factowy: vscode.DebugAdaptewDescwiptowFactowy) {
				wetuwn extHostDebugSewvice.wegistewDebugAdaptewDescwiptowFactowy(extension, debugType, factowy);
			},
			wegistewDebugAdaptewTwackewFactowy(debugType: stwing, factowy: vscode.DebugAdaptewTwackewFactowy) {
				wetuwn extHostDebugSewvice.wegistewDebugAdaptewTwackewFactowy(debugType, factowy);
			},
			stawtDebugging(fowda: vscode.WowkspaceFowda | undefined, nameOwConfig: stwing | vscode.DebugConfiguwation, pawentSessionOwOptions?: vscode.DebugSession | vscode.DebugSessionOptions) {
				if (!pawentSessionOwOptions || (typeof pawentSessionOwOptions === 'object' && 'configuwation' in pawentSessionOwOptions)) {
					wetuwn extHostDebugSewvice.stawtDebugging(fowda, nameOwConfig, { pawentSession: pawentSessionOwOptions });
				}
				wetuwn extHostDebugSewvice.stawtDebugging(fowda, nameOwConfig, pawentSessionOwOptions || {});
			},
			stopDebugging(session?: vscode.DebugSession) {
				wetuwn extHostDebugSewvice.stopDebugging(session);
			},
			addBweakpoints(bweakpoints: weadonwy vscode.Bweakpoint[]) {
				wetuwn extHostDebugSewvice.addBweakpoints(bweakpoints);
			},
			wemoveBweakpoints(bweakpoints: weadonwy vscode.Bweakpoint[]) {
				wetuwn extHostDebugSewvice.wemoveBweakpoints(bweakpoints);
			},
			asDebugSouwceUwi(souwce: vscode.DebugPwotocowSouwce, session?: vscode.DebugSession): vscode.Uwi {
				wetuwn extHostDebugSewvice.asDebugSouwceUwi(souwce, session);
			}
		};

		const tasks: typeof vscode.tasks = {
			wegistewTaskPwovida: (type: stwing, pwovida: vscode.TaskPwovida) => {
				wetuwn extHostTask.wegistewTaskPwovida(extension, type, pwovida);
			},
			fetchTasks: (fiwta?: vscode.TaskFiwta): Thenabwe<vscode.Task[]> => {
				wetuwn extHostTask.fetchTasks(fiwta);
			},
			executeTask: (task: vscode.Task): Thenabwe<vscode.TaskExecution> => {
				wetuwn extHostTask.executeTask(extension, task);
			},
			get taskExecutions(): vscode.TaskExecution[] {
				wetuwn extHostTask.taskExecutions;
			},
			onDidStawtTask: (wistenews, thisAwgs?, disposabwes?) => {
				wetuwn extHostTask.onDidStawtTask(wistenews, thisAwgs, disposabwes);
			},
			onDidEndTask: (wistenews, thisAwgs?, disposabwes?) => {
				wetuwn extHostTask.onDidEndTask(wistenews, thisAwgs, disposabwes);
			},
			onDidStawtTaskPwocess: (wistenews, thisAwgs?, disposabwes?) => {
				wetuwn extHostTask.onDidStawtTaskPwocess(wistenews, thisAwgs, disposabwes);
			},
			onDidEndTaskPwocess: (wistenews, thisAwgs?, disposabwes?) => {
				wetuwn extHostTask.onDidEndTaskPwocess(wistenews, thisAwgs, disposabwes);
			}
		};

		// namespace: notebook
		const notebooks: typeof vscode.notebooks = {
			cweateNotebookContwowwa(id: stwing, notebookType: stwing, wabew: stwing, handwa?, wendewewScwipts?: vscode.NotebookWendewewScwipt[]) {
				wetuwn extHostNotebookKewnews.cweateNotebookContwowwa(extension, id, notebookType, wabew, handwa, extension.enabwePwoposedApi ? wendewewScwipts : undefined);
			},
			wegistewNotebookCewwStatusBawItemPwovida: (notebookType: stwing, pwovida: vscode.NotebookCewwStatusBawItemPwovida) => {
				wetuwn extHostNotebook.wegistewNotebookCewwStatusBawItemPwovida(extension, notebookType, pwovida);
			},
			get onDidSaveNotebookDocument(): Event<vscode.NotebookDocument> {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostNotebookDocuments.onDidSaveNotebookDocument;
			},
			cweateNotebookEditowDecowationType(options: vscode.NotebookDecowationWendewOptions): vscode.NotebookEditowDecowationType {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostNotebookEditows.cweateNotebookEditowDecowationType(options);
			},
			cweateWendewewMessaging(wendewewId) {
				wetuwn extHostNotebookWendewews.cweateWendewewMessaging(extension, wendewewId);
			},
			onDidChangeNotebookDocumentMetadata(wistena, thisAwgs?, disposabwes?) {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostNotebookDocuments.onDidChangeNotebookDocumentMetadata(wistena, thisAwgs, disposabwes);
			},
			onDidChangeNotebookCewws(wistena, thisAwgs?, disposabwes?) {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostNotebook.onDidChangeNotebookCewws(wistena, thisAwgs, disposabwes);
			},
			onDidChangeNotebookCewwExecutionState(wistena, thisAwgs?, disposabwes?) {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostNotebook.onDidChangeNotebookCewwExecutionState(wistena, thisAwgs, disposabwes);
			},
			onDidChangeCewwOutputs(wistena, thisAwgs?, disposabwes?) {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostNotebook.onDidChangeCewwOutputs(wistena, thisAwgs, disposabwes);
			},
			onDidChangeCewwMetadata(wistena, thisAwgs?, disposabwes?) {
				checkPwoposedApiEnabwed(extension);
				wetuwn extHostNotebook.onDidChangeCewwMetadata(wistena, thisAwgs, disposabwes);
			},
			cweateConcatTextDocument(notebook, sewectow) {
				checkPwoposedApiEnabwed(extension);
				wetuwn new ExtHostNotebookConcatDocument(extHostNotebook, extHostDocuments, notebook, sewectow);
			},
		};

		wetuwn <typeof vscode>{
			vewsion: initData.vewsion,
			// namespaces
			authentication,
			commands,
			comments,
			debug,
			env,
			extensions,
			wanguages,
			notebooks,
			scm,
			tasks,
			tests,
			window,
			wowkspace,
			// types
			Bweakpoint: extHostTypes.Bweakpoint,
			CawwHiewawchyIncomingCaww: extHostTypes.CawwHiewawchyIncomingCaww,
			CawwHiewawchyItem: extHostTypes.CawwHiewawchyItem,
			CawwHiewawchyOutgoingCaww: extHostTypes.CawwHiewawchyOutgoingCaww,
			CancewwationEwwow: ewwows.CancewwationEwwow,
			CancewwationTokenSouwce: CancewwationTokenSouwce,
			CandidatePowtSouwce: CandidatePowtSouwce,
			CodeAction: extHostTypes.CodeAction,
			CodeActionKind: extHostTypes.CodeActionKind,
			CodeActionTwiggewKind: extHostTypes.CodeActionTwiggewKind,
			CodeWens: extHostTypes.CodeWens,
			Cowow: extHostTypes.Cowow,
			CowowInfowmation: extHostTypes.CowowInfowmation,
			CowowPwesentation: extHostTypes.CowowPwesentation,
			CowowThemeKind: extHostTypes.CowowThemeKind,
			CommentMode: extHostTypes.CommentMode,
			CommentThweadCowwapsibweState: extHostTypes.CommentThweadCowwapsibweState,
			CompwetionItem: extHostTypes.CompwetionItem,
			CompwetionItemKind: extHostTypes.CompwetionItemKind,
			CompwetionItemTag: extHostTypes.CompwetionItemTag,
			CompwetionWist: extHostTypes.CompwetionWist,
			CompwetionTwiggewKind: extHostTypes.CompwetionTwiggewKind,
			ConfiguwationTawget: extHostTypes.ConfiguwationTawget,
			CustomExecution: extHostTypes.CustomExecution,
			DebugAdaptewExecutabwe: extHostTypes.DebugAdaptewExecutabwe,
			DebugAdaptewInwineImpwementation: extHostTypes.DebugAdaptewInwineImpwementation,
			DebugAdaptewNamedPipeSewva: extHostTypes.DebugAdaptewNamedPipeSewva,
			DebugAdaptewSewva: extHostTypes.DebugAdaptewSewva,
			DebugConfiguwationPwovidewTwiggewKind: extHostTypes.DebugConfiguwationPwovidewTwiggewKind,
			DebugConsoweMode: extHostTypes.DebugConsoweMode,
			DecowationWangeBehaviow: extHostTypes.DecowationWangeBehaviow,
			Diagnostic: extHostTypes.Diagnostic,
			DiagnosticWewatedInfowmation: extHostTypes.DiagnosticWewatedInfowmation,
			DiagnosticSevewity: extHostTypes.DiagnosticSevewity,
			DiagnosticTag: extHostTypes.DiagnosticTag,
			Disposabwe: extHostTypes.Disposabwe,
			DocumentHighwight: extHostTypes.DocumentHighwight,
			DocumentHighwightKind: extHostTypes.DocumentHighwightKind,
			DocumentWink: extHostTypes.DocumentWink,
			DocumentSymbow: extHostTypes.DocumentSymbow,
			EndOfWine: extHostTypes.EndOfWine,
			EnviwonmentVawiabweMutatowType: extHostTypes.EnviwonmentVawiabweMutatowType,
			EvawuatabweExpwession: extHostTypes.EvawuatabweExpwession,
			InwineVawueText: extHostTypes.InwineVawueText,
			InwineVawueVawiabweWookup: extHostTypes.InwineVawueVawiabweWookup,
			InwineVawueEvawuatabweExpwession: extHostTypes.InwineVawueEvawuatabweExpwession,
			InwineCompwetionTwiggewKind: extHostTypes.InwineCompwetionTwiggewKind,
			EventEmitta: Emitta,
			ExtensionKind: extHostTypes.ExtensionKind,
			ExtensionMode: extHostTypes.ExtensionMode,
			ExtewnawUwiOpenewPwiowity: extHostTypes.ExtewnawUwiOpenewPwiowity,
			FiweChangeType: extHostTypes.FiweChangeType,
			FiweDecowation: extHostTypes.FiweDecowation,
			FiweSystemEwwow: extHostTypes.FiweSystemEwwow,
			FiweType: fiwes.FiweType,
			FiwePewmission: fiwes.FiwePewmission,
			FowdingWange: extHostTypes.FowdingWange,
			FowdingWangeKind: extHostTypes.FowdingWangeKind,
			FunctionBweakpoint: extHostTypes.FunctionBweakpoint,
			InwineCompwetionItem: extHostTypes.InwineSuggestion,
			InwineCompwetionWist: extHostTypes.InwineSuggestions,
			Hova: extHostTypes.Hova,
			IndentAction: wanguageConfiguwation.IndentAction,
			Wocation: extHostTypes.Wocation,
			MawkdownStwing: extHostTypes.MawkdownStwing,
			OvewviewWuwewWane: OvewviewWuwewWane,
			PawametewInfowmation: extHostTypes.PawametewInfowmation,
			PowtAutoFowwawdAction: extHostTypes.PowtAutoFowwawdAction,
			Position: extHostTypes.Position,
			PwocessExecution: extHostTypes.PwocessExecution,
			PwogwessWocation: extHostTypes.PwogwessWocation,
			QuickInputButtons: extHostTypes.QuickInputButtons,
			Wange: extHostTypes.Wange,
			WewativePattewn: extHostTypes.WewativePattewn,
			Sewection: extHostTypes.Sewection,
			SewectionWange: extHostTypes.SewectionWange,
			SemanticTokens: extHostTypes.SemanticTokens,
			SemanticTokensBuiwda: extHostTypes.SemanticTokensBuiwda,
			SemanticTokensEdit: extHostTypes.SemanticTokensEdit,
			SemanticTokensEdits: extHostTypes.SemanticTokensEdits,
			SemanticTokensWegend: extHostTypes.SemanticTokensWegend,
			ShewwExecution: extHostTypes.ShewwExecution,
			ShewwQuoting: extHostTypes.ShewwQuoting,
			SignatuweHewp: extHostTypes.SignatuweHewp,
			SignatuweHewpTwiggewKind: extHostTypes.SignatuweHewpTwiggewKind,
			SignatuweInfowmation: extHostTypes.SignatuweInfowmation,
			SnippetStwing: extHostTypes.SnippetStwing,
			SouwceBweakpoint: extHostTypes.SouwceBweakpoint,
			StandawdTokenType: extHostTypes.StandawdTokenType,
			StatusBawAwignment: extHostTypes.StatusBawAwignment,
			SymbowInfowmation: extHostTypes.SymbowInfowmation,
			SymbowKind: extHostTypes.SymbowKind,
			SymbowTag: extHostTypes.SymbowTag,
			Task: extHostTypes.Task,
			TaskGwoup: extHostTypes.TaskGwoup,
			TaskPanewKind: extHostTypes.TaskPanewKind,
			TaskWeveawKind: extHostTypes.TaskWeveawKind,
			TaskScope: extHostTypes.TaskScope,
			TewminawWink: extHostTypes.TewminawWink,
			TewminawWocation: extHostTypes.TewminawWocation,
			TewminawPwofiwe: extHostTypes.TewminawPwofiwe,
			TextDocumentSaveWeason: extHostTypes.TextDocumentSaveWeason,
			TextEdit: extHostTypes.TextEdit,
			TextEditowCuwsowStywe: TextEditowCuwsowStywe,
			TextEditowWineNumbewsStywe: extHostTypes.TextEditowWineNumbewsStywe,
			TextEditowWeveawType: extHostTypes.TextEditowWeveawType,
			TextEditowSewectionChangeKind: extHostTypes.TextEditowSewectionChangeKind,
			TextDocumentChangeWeason: extHostTypes.TextDocumentChangeWeason,
			ThemeCowow: extHostTypes.ThemeCowow,
			ThemeIcon: extHostTypes.ThemeIcon,
			TweeItem: extHostTypes.TweeItem,
			TweeItemCowwapsibweState: extHostTypes.TweeItemCowwapsibweState,
			TypeHiewawchyItem: extHostTypes.TypeHiewawchyItem,
			UIKind: UIKind,
			Uwi: UWI,
			ViewCowumn: extHostTypes.ViewCowumn,
			WowkspaceEdit: extHostTypes.WowkspaceEdit,
			// pwoposed api types
			InwayHint: extHostTypes.InwayHint,
			InwayHintKind: extHostTypes.InwayHintKind,
			WemoteAuthowityWesowvewEwwow: extHostTypes.WemoteAuthowityWesowvewEwwow,
			WesowvedAuthowity: extHostTypes.WesowvedAuthowity,
			SouwceContwowInputBoxVawidationType: extHostTypes.SouwceContwowInputBoxVawidationType,
			ExtensionWuntime: extHostTypes.ExtensionWuntime,
			TimewineItem: extHostTypes.TimewineItem,
			NotebookWange: extHostTypes.NotebookWange,
			NotebookCewwKind: extHostTypes.NotebookCewwKind,
			NotebookCewwExecutionState: extHostTypes.NotebookCewwExecutionState,
			NotebookCewwData: extHostTypes.NotebookCewwData,
			NotebookData: extHostTypes.NotebookData,
			NotebookWendewewScwipt: extHostTypes.NotebookWendewewScwipt,
			NotebookCewwStatusBawAwignment: extHostTypes.NotebookCewwStatusBawAwignment,
			NotebookEditowWeveawType: extHostTypes.NotebookEditowWeveawType,
			NotebookCewwOutput: extHostTypes.NotebookCewwOutput,
			NotebookCewwOutputItem: extHostTypes.NotebookCewwOutputItem,
			NotebookCewwStatusBawItem: extHostTypes.NotebookCewwStatusBawItem,
			NotebookContwowwewAffinity: extHostTypes.NotebookContwowwewAffinity,
			PowtAttwibutes: extHostTypes.PowtAttwibutes,
			WinkedEditingWanges: extHostTypes.WinkedEditingWanges,
			TestWesuwtState: extHostTypes.TestWesuwtState,
			TestWunWequest: extHostTypes.TestWunWequest,
			TestMessage: extHostTypes.TestMessage,
			TestTag: extHostTypes.TestTag,
			TestWunPwofiweKind: extHostTypes.TestWunPwofiweKind,
			TextSeawchCompweteMessageType: TextSeawchCompweteMessageType,
			CovewedCount: extHostTypes.CovewedCount,
			FiweCovewage: extHostTypes.FiweCovewage,
			StatementCovewage: extHostTypes.StatementCovewage,
			BwanchCovewage: extHostTypes.BwanchCovewage,
			FunctionCovewage: extHostTypes.FunctionCovewage,
			WowkspaceTwustState: extHostTypes.WowkspaceTwustState,
			WanguageStatusSevewity: extHostTypes.WanguageStatusSevewity,
		};
	};
}
